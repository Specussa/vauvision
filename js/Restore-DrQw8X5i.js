import{_ as y}from"./auth-D_GbeW7X.js";import{T as k,_ as E}from"./index-DLLIllaA.js";import{L}from"./Logo-BjNREyvW.js";import{B as V}from"./BackSVG-B1-ysIII.js";import{s as x}from"./api-dDMw0Exz.js";import{E as l}from"./element-plus-3NUcAjFf.js";import{d as A,b as p,Z as f,c as n,a as e,U as d,I,T as R,R as v,O as B,u as C,ai as h,o as _}from"./@vue-DwLU1mub.js";import"./vue-router-CPimp6oI.js";import"./vue-i18n-DcgfqTZL.js";import"./@intlify-CQT3u4ju.js";import"./@element-plus-m0wAbjkV.js";import"./vue-tel-input-BsVA42h1.js";import"./lodash-es-CiJSjksT.js";import"./@vueuse-Q_cOxmjC.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-Ct2Knyoi.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DF51-gJp.js";import"./axios-BimPEqV4.js";const M={class:"auth"},S={class:"auth__container container"},D={class:"auth__block"},w={class:"auth__flex"},N={class:"auth__left"},T={class:"auth__left_left"},z={class:"auth__logo"},G={class:"auth__right"},U={class:"auth__form"},$={class:"form__flex"},j={class:"form__group"},q={key:0,class:"error text_very"},F={key:1,class:"form__description text_very success-message"},O={class:"form__buttons"},Z=["disabled"],H={key:0},J={key:1},K=A({__name:"Restore",setup(P){const m=p(!1),a=f({email:""}),o=f({email:""}),r=p(!1),c=()=>{let i=!0;return o.email="",a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email.trim())||(o.email="Введите корректный email адрес",i=!1):(o.email="Email обязателен для заполнения",i=!1),i},g=async()=>{if(!c())return;r.value=!0;const i={EMAIL:a.email.trim()};try{const s=await x("post","/ajax/auth/forgot.php",i);console.log("Запрос на восстановление пароля отправлен:",s.data),m.value=!0,l({message:"Ссылка для восстановления пароля отправлена на ваш email!",type:"success"}),a.email=""}catch(s){if(console.error("Ошибка при отправке запроса на восстановление пароля:",s),s.response&&s.response.data){const t=s.response.data;t.EMAIL&&(o.email=Array.isArray(t.EMAIL)?t.EMAIL[0]:t.EMAIL),t.email_not_found&&l({message:t.email_not_found,type:"error"}),t.detail?l({message:t.detail,type:"error"}):t.non_field_errors?l({message:Array.isArray(t.non_field_errors)?t.non_field_errors[0]:t.non_field_errors,type:"error"}):t.error&&l({message:t.error,type:"error"})}else l({message:"Произошла ошибка при отправке запроса. Попробуйте еще раз.",type:"error"})}finally{r.value=!1}};return(i,s)=>{const t=h("el-input"),b=h("RouterLink");return _(),n("section",M,[e("div",S,[e("div",D,[e("div",w,[e("div",N,[e("div",T,[e("div",z,[d(L)]),s[2]||(s[2]=e("div",{class:"auth__info"},[e("h3",{class:"auth__heading"},"Стань известным и популярным в мире музыки"),e("p",{class:"auth__description"},"Выложи трек на все площадки и продавай свою музыку во всем мире")],-1))]),s[3]||(s[3]=e("div",{class:"auth__image"},[e("img",{src:y,alt:"cover"})],-1))]),e("div",G,[e("div",U,[s[6]||(s[6]=e("div",{class:"form__heading"},[e("h1",{class:"form__head title_two"},"Восстановление пароля"),e("p",{class:"form__desc title_small"},"Введите e-mail, на который будет отправлена ссылка с восстановлением пароля.")],-1)),e("div",$,[e("div",j,[s[4]||(s[4]=e("label",{for:"email",class:"form__label button"},"E-mail",-1)),d(t,{id:"email",modelValue:a.email,"onUpdate:modelValue":s[0]||(s[0]=u=>a.email=u),type:"email",class:I({error:o.email}),placeholder:"Введите ваш e-mail",disabled:r.value||m.value,onBlur:c,onInput:s[1]||(s[1]=u=>o.email=""),size:"large"},null,8,["modelValue","class","disabled"]),o.email?(_(),n("div",q,R(o.email),1)):v("",!0),m.value?(_(),n("p",F," Если у вас есть учётная запись Vauvision, соответствующая этому адресу электронной почты, вы получите ссылку для сброса пароля в течение следующих 10 минут. Если вы её не видите, проверьте папку со спамом. ")):v("",!0)])]),e("div",O,[d(b,{class:"auth__back button__second button",to:C(k).i18nRoute({name:"login"}),disabled:r.value},{default:B(()=>[e("span",null,[d(V)]),s[5]||(s[5]=e("span",null,"Назад",-1))]),_:1},8,["to","disabled"]),e("button",{class:"form__send button__black button",onClick:g,disabled:r.value||m.value},[r.value?(_(),n("span",J,"Загрузка...")):(_(),n("span",H,"Отправить"))],8,Z)])])])])])])])}}}),ge=E(K,[["__scopeId","data-v-2b21e42a"]]);export{ge as default};
