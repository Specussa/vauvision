import{H as at,M as ot}from"./Menu-BBq7Y8vQ.js";import{d as _e,c,a as e,I as w,o as u,b as O,k as ce,j as ze,e as me,U as z,u as A,T as C,S as B,aA as le,F as ue,a8 as he,R as f,Z as ye,Y as Ze,O as ke,a2 as ge,P as Ke,ag as je,n as rt,M as ve}from"./@vue-DwLU1mub.js";import{_ as ae}from"./index-DLLIllaA.js";import{B as pe}from"./BackSVG-B1-ysIII.js";import{E as Y,a as Be,b as D,c as xe,d as Ae,e as et,f as Ve}from"./element-plus-3NUcAjFf.js";import{d as Me}from"./dayjs-Ct2Knyoi.js";import"./vue-router-CPimp6oI.js";import"./Logo-BjNREyvW.js";import"./ArticlesSVG-Ro8Ohdf6.js";import"./vue-i18n-DcgfqTZL.js";import"./@intlify-CQT3u4ju.js";import"./@element-plus-m0wAbjkV.js";import"./vue-tel-input-BsVA42h1.js";import"./lodash-es-CiJSjksT.js";import"./@vueuse-Q_cOxmjC.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DF51-gJp.js";const it={class:"quiz__menu"},nt=_e({__name:"QuizMenu",props:{currentStep:{}},emits:["go-to-step"],setup(oe,{emit:I}){const Q=I,s=t=>{Q("go-to-step",t)};return(t,o)=>(u(),c("div",it,[e("button",{class:w(["quiz__menu_button button",{active:t.currentStep===1}]),onClick:o[0]||(o[0]=h=>s(1))},o[8]||(o[8]=[e("span",null,"Шаг 1. Оформление заказа",-1)]),2),e("button",{class:w(["quiz__menu_button button",{active:t.currentStep===2}]),onClick:o[1]||(o[1]=h=>s(2))},o[9]||(o[9]=[e("span",null,"Шаг 2. Загрузить трек",-1)]),2),e("button",{class:w(["quiz__menu_button button",{active:t.currentStep===3}]),onClick:o[2]||(o[2]=h=>s(3))},o[10]||(o[10]=[e("span",null,"Шаг 3. Информация о треке",-1)]),2),e("button",{class:w(["quiz__menu_button button",{active:t.currentStep===4}]),onClick:o[3]||(o[3]=h=>s(4))},o[11]||(o[11]=[e("span",null,"Шаг 4. Данные паспорта",-1)]),2),e("button",{class:w(["quiz__menu_button button",{active:t.currentStep===5}]),onClick:o[4]||(o[4]=h=>s(5))},o[12]||(o[12]=[e("span",null,"Шаг 5. Жанр и текст",-1)]),2),e("button",{class:w(["quiz__menu_button button",{active:t.currentStep===6}]),onClick:o[5]||(o[5]=h=>s(6))},o[13]||(o[13]=[e("span",null,"Шаг 6. Дополнительная информация",-1)]),2),e("button",{class:w(["quiz__menu_button button",{active:t.currentStep===7}]),onClick:o[6]||(o[6]=h=>s(7))},o[14]||(o[14]=[e("span",null,"Шаг 7. Договор",-1)]),2),e("button",{class:w(["quiz__menu_button button",{active:t.currentStep===8}]),onClick:o[7]||(o[7]=h=>s(8))},o[15]||(o[15]=[e("span",null,"Шаг 8. Финал",-1)]),2)]))}}),ut=ae(nt,[["__scopeId","data-v-be1272d8"]]),dt={class:"quiz__form quiz__form_one"},mt={class:"quiz__form_one_list"},_t={class:"quiz__form_one_item"},ct={class:"quiz__form_one_right"},pt={class:"quiz__form_one_count"},ft={class:"quiz__form_one_item"},vt={class:"quiz__form_one_right"},gt={class:"quiz__form_one_count"},kt={class:"quiz__form_one_item"},bt={class:"quiz__form_one_right"},ht={class:"quiz__form_one_count"},yt={class:"quiz__form_one_item"},zt={class:"quiz__form_one_right"},$t={class:"quiz__form_one_count"},Nt={class:"quiz__form_bottom"},Ct={class:"quiz__form_buttons"},St=["disabled"],qt={class:"quiz__form_sum"},Ft={class:"quiz__form_total"},We="quiz1_state",Vt=_e({__name:"Quiz1",emits:["go-back","go-next"],setup(oe,{emit:I}){const Q=I,s=O(0),t=O(0),o=O(0),h=O(0),F=()=>{try{const T={singleCount:s.value,albumCount:t.value,clipCount:o.value,cardCount:h.value};localStorage.setItem(We,JSON.stringify(T))}catch(T){console.error("Error saving state to localStorage:",T)}},x=()=>{try{const T=localStorage.getItem(We);if(T){const p=JSON.parse(T);s.value=p.singleCount||0,t.value=p.albumCount||0,o.value=p.clipCount||0,h.value=p.cardCount||0}}catch(T){console.error("Error loading state from localStorage:",T)}},$=ce(()=>s.value===0&&t.value===0),L=ce(()=>{const T={single:2590,album:2590,clip:2590,card:2590};return s.value*T.single+t.value*T.album+o.value*T.clip+h.value*T.card});ze(()=>{x()});const P=()=>{Q("go-back")},R=()=>{if($.value){Y.warning("Для продолжения выберите хотя бы один сингл или альбом");return}F(),Q("go-next")};return me([s,t,o,h],()=>{F()},{immediate:!1}),(T,p)=>(u(),c("div",dt,[p[16]||(p[16]=e("div",{class:"quiz__form_top"},[e("h4",{class:"quiz__form_head"},"Что вы хотите загрузить?"),e("button",{class:"quiz__additional button__second button"},[e("span",null,"Дополнительная информация")])],-1)),e("ul",mt,[e("li",_t,[p[5]||(p[5]=e("h6",{class:"quiz__form_one_head"},"Сингл",-1)),e("div",ct,[p[4]||(p[4]=e("p",{class:"quiz__form_one_price"},"2590 ₽",-1)),e("div",pt,[z(A(Be),{modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=G=>s.value=G),min:0,max:99,controls:!0,"show-input":!1},null,8,["modelValue"])])])]),e("li",ft,[p[7]||(p[7]=e("h6",{class:"quiz__form_one_head"},"Альбом",-1)),e("div",vt,[p[6]||(p[6]=e("p",{class:"quiz__form_one_price"},"2590 ₽",-1)),e("div",gt,[z(A(Be),{modelValue:t.value,"onUpdate:modelValue":p[1]||(p[1]=G=>t.value=G),min:0,max:99,controls:!0,"show-input":!1},null,8,["modelValue"])])])]),e("li",kt,[p[9]||(p[9]=e("h6",{class:"quiz__form_one_head"},"Клип",-1)),e("div",bt,[p[8]||(p[8]=e("p",{class:"quiz__form_one_price"},"2590 ₽",-1)),e("div",ht,[z(A(Be),{modelValue:o.value,"onUpdate:modelValue":p[2]||(p[2]=G=>o.value=G),min:0,max:99,controls:!0,"show-input":!1},null,8,["modelValue"])])])]),e("li",yt,[p[11]||(p[11]=e("h6",{class:"quiz__form_one_head"},"оформление карточки",-1)),e("div",zt,[p[10]||(p[10]=e("p",{class:"quiz__form_one_price"},"2590 ₽",-1)),e("div",$t,[z(A(Be),{modelValue:h.value,"onUpdate:modelValue":p[3]||(p[3]=G=>h.value=G),min:0,max:99,controls:!0,"show-input":!1},null,8,["modelValue"])])])])]),e("div",Nt,[e("div",Ct,[e("button",{class:"form__back button__second button",onClick:P},[e("span",null,[z(pe)]),p[12]||(p[12]=e("span",null,"Назад",-1))]),e("button",{class:"quiz__form_button button__black button",disabled:$.value,onClick:R},p[13]||(p[13]=[e("span",null,"Продолжить",-1)]),8,St)]),e("div",qt,[p[15]||(p[15]=e("p",{class:"quiz__form_sum_text"},"Итого к оплате:",-1)),e("h4",Ft,[e("span",null,C(L.value),1),p[14]||(p[14]=B(" ₽"))])])])]))}}),xt=ae(Vt,[["__scopeId","data-v-ef465941"]]),At={},Tt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"};function Lt(oe,I){return u(),c("svg",Tt,I[0]||(I[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.46967 6.46967C6.76256 6.17678 7.23744 6.17678 7.53033 6.46967L17.5303 16.4697C17.8232 16.7626 17.8232 17.2374 17.5303 17.5303C17.2374 17.8232 16.7626 17.8232 16.4697 17.5303L6.46967 7.53033C6.17678 7.23744 6.17678 6.76256 6.46967 6.46967Z",fill:"currentColor"},null,-1),e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.5303 6.46967C17.8232 6.76256 17.8232 7.23744 17.5303 7.53033L7.53033 17.5303C7.23744 17.8232 6.76256 17.8232 6.46967 17.5303C6.17678 17.2374 6.17678 16.7626 6.46967 16.4697L16.4697 6.46967C16.7626 6.17678 17.2374 6.17678 17.5303 6.46967Z",fill:"currentColor"},null,-1)]))}const Te=ae(At,[["render",Lt]]),wt={key:0,class:"quiz__form quiz__form_two"},Bt={key:0,class:"quiz__section"},Mt={key:0,class:"quiz__singles_list"},Ut={class:"quiz__single_item_title"},Dt={key:0,class:"quiz__form_single_audio_info"},Pt={class:"quiz__form_single_name"},Et={class:"quiz__form_single_name_left"},Rt={class:"quiz__form_single_name_text"},Ot={class:"quiz__form_single_name_size text_small"},Gt=["onClick"],Yt={key:1,class:"form__flex"},Qt={class:"form__group"},It={key:0,class:"error text_very quiz__form_single_error"},Jt={class:"form__group"},Kt={key:0,class:"error text_very quiz__form_single_error"},jt={class:"form__group"},Wt={key:0,class:"error text_very quiz__form_single_error"},Ht={class:"form__group"},Xt={key:0,class:"error text_very quiz__form_single_error"},Zt={key:2,class:"quiz__form_single_buttons"},es=["onClick","disabled"],ts={key:0},ss={key:1},ls={key:3,class:"error text_very quiz__form_single_error"},as={key:1,class:"quiz__section"},os={key:0,class:"quiz__albums_list"},rs={class:"quiz__album_item_title"},is={class:"form__flex"},ns={class:"form__group"},us={key:0,class:"error text_very quiz__form_single_error"},ds={class:"quiz__album_tracks"},ms={class:"quiz__album_tracks_list"},_s={key:0,class:"quiz__album_track_header"},cs=["onClick"],ps={key:1,class:"quiz__album_track_audio_info"},fs={class:"quiz__form_single_name"},vs={class:"quiz__form_single_name_left"},gs={class:"quiz__form_single_name_text"},ks={class:"quiz__form_single_name_size text_small"},bs=["onClick"],hs={class:"form__flex"},ys={class:"form__group"},zs={key:0,class:"error text_very quiz__form_single_error"},$s={class:"form__group"},Ns={key:0,class:"error text_very quiz__form_single_error"},Cs={class:"form__group"},Ss={key:0,class:"error text_very quiz__form_single_error"},qs={class:"form__group"},Fs={key:0,class:"error text_very quiz__form_single_error"},Vs={key:2,class:"quiz__album_track_buttons"},xs=["onClick","disabled"],As={key:0},Ts={key:1},Ls={key:3,class:"error text_very quiz__form_single_error"},ws={class:"quiz__album_add_track"},Bs=["onClick","disabled"],Ms={key:2,class:"quiz__form_bottom"},Us={class:"quiz__form_buttons"},Ds=["disabled"],Ps=["disabled"],Es={key:0},Rs={key:1},Os={key:3,class:"quiz__no_items"},Gs={class:"quiz__form_bottom"},Ys={class:"quiz__form_buttons"},Qs=["disabled"],Is={key:1,class:"quiz__form quiz__important"},Js={class:"quiz__form_bottom"},Ks={class:"quiz__form_buttons"},js=["disabled"],Ws=["disabled"],Hs={key:0},Xs={key:1},He="quiz2_state",Zs=_e({__name:"Quiz2",emits:["go-back","go-next"],setup(oe,{emit:I}){const Q=I,s=O(!1),t=O(!1),o=["нет","такой","информации","не","знаю","откуда"],h=O([]),F=O([]),x=O([]),$=O([]),L=O(!1),P=r=>new Promise((a,d)=>{const i=new FileReader;i.readAsDataURL(r),i.onload=()=>a(i.result),i.onerror=M=>d(M)}),R=(r,a,d)=>{const i=r.split(","),M=atob(i[1]||i[0]);let U=M.length;const E=new Uint8Array(U);for(;U--;)E[U]=M.charCodeAt(U);return new File([E],a,{type:d})},T=r=>{const a=r.match(/^data:(.*?);base64,/);return a?a[1]:"audio/mpeg"},p=async()=>{try{const r={singleTracks:x.value.map(a=>({id:a.id,performerName:a.performerName,musicAuthor:a.musicAuthor,textAuthor:a.textAuthor,trackName:a.trackName,audioFileName:a.audioFileName,audioFileSize:a.audioFileSize,audioFileBase64:a.audioFileBase64,uploaded:a.uploaded,hasAudioUploaded:a.hasAudioUploaded})),albums:$.value.map(a=>({id:a.id,albumName:a.albumName,performerName:a.performerName,musicAuthor:a.musicAuthor,textAuthor:a.textAuthor,tracks:a.tracks.map(d=>({id:d.id,trackNumber:d.trackNumber,trackName:d.trackName,performerName:d.performerName,musicAuthor:d.musicAuthor,textAuthor:d.textAuthor,audioFileName:d.audioFileName,audioFileSize:d.audioFileSize,audioFileBase64:d.audioFileBase64,uploaded:d.uploaded}))}))};localStorage.setItem(He,JSON.stringify(r)),console.log("State saved to localStorage")}catch(r){console.error("Error saving state to localStorage:",r),Y.error("Ошибка при сохранении данных")}},G=async()=>{try{const r=localStorage.getItem(He),a=N();if(!r)return;const d=JSON.parse(r);a.singleCount>0&&d.singleTracks&&d.singleTracks.length>0?(x.value=await Promise.all(d.singleTracks.map(async i=>{let M=null;if(i.audioFileBase64)try{const U=T(i.audioFileBase64);M=R(i.audioFileBase64,i.audioFileName,U)}catch(U){console.error("Error converting base64 to file:",U)}return{id:i.id||`single-${Date.now()}-${Math.random()}`,performerName:i.performerName||"",musicAuthor:i.musicAuthor||"",textAuthor:i.textAuthor||"",trackName:i.trackName||"",audioFile:M,audioFileName:i.audioFileName||"",audioFileSize:i.audioFileSize||0,audioFileBase64:i.audioFileBase64||"",uploaded:i.uploaded||!1,hasAudioUploaded:i.hasAudioUploaded||!1}})),h.value=x.value.map(()=>({performerName:"",musicAuthor:"",textAuthor:"",trackName:"",audioFile:""}))):(x.value=[],h.value=[]),a.albumCount>0&&d.albums&&d.albums.length>0?($.value=await Promise.all(d.albums.map(async i=>({id:i.id||`album-${Date.now()}-${Math.random()}`,albumName:i.albumName||"",performerName:i.performerName||"",musicAuthor:i.musicAuthor||"",textAuthor:i.textAuthor||"",tracks:await Promise.all((i.tracks||[]).map(async M=>{let U=null;if(M.audioFileBase64)try{const E=T(M.audioFileBase64);U=R(M.audioFileBase64,M.audioFileName,E)}catch(E){console.error("Error converting base64 to file:",E)}return{id:M.id||`album-track-${Date.now()}-${Math.random()}`,trackNumber:M.trackNumber||1,trackName:M.trackName||"",performerName:M.performerName||i.performerName||"",musicAuthor:M.musicAuthor||i.musicAuthor||"",textAuthor:M.textAuthor||i.textAuthor||"",audioFile:U,audioFileName:M.audioFileName||"",audioFileSize:M.audioFileSize||0,audioFileBase64:M.audioFileBase64||"",uploaded:M.uploaded||!1}}))}))),F.value=$.value.map(i=>({albumName:"",tracks:i.tracks.map(()=>({performerName:"",musicAuthor:"",textAuthor:"",trackName:"",audioFile:""}))}))):($.value=[],F.value=[])}catch(r){console.error("Error loading state from localStorage:",r),Y.error("Ошибка при загрузке сохраненных данных")}},N=()=>{try{const r=localStorage.getItem("quiz1_state");if(r){const a=JSON.parse(r);return{singleCount:a.singleCount||0,albumCount:a.albumCount||0}}}catch(r){console.error("Error reading quiz1 state:",r)}return{singleCount:0,albumCount:0}},m=()=>{const r=N();console.log("Counts from Quiz1:",r);const a=r.singleCount>0,d=r.albumCount>0;if(!a&&x.value.length>0&&(console.log("Clearing single tracks because no singles selected in Quiz1"),x.value=[],h.value=[]),!d&&$.value.length>0&&(console.log("Clearing albums because no albums selected in Quiz1"),$.value=[],F.value=[]),a&&x.value.length===0){console.log(`Creating ${r.singleCount} single tracks`);for(let i=0;i<r.singleCount;i++)x.value.push({id:`single-${Date.now()}-${i}-${Math.random()}`,performerName:"",musicAuthor:"",textAuthor:"",trackName:"",audioFile:null,audioFileName:"",audioFileSize:0,audioFileBase64:"",uploaded:!1,hasAudioUploaded:!1});h.value=x.value.map(()=>({performerName:"",musicAuthor:"",textAuthor:"",trackName:"",audioFile:""}))}if(d&&$.value.length===0){console.log(`Creating ${r.albumCount} albums`);for(let i=0;i<r.albumCount;i++)$.value.push({id:`album-${Date.now()}-${i}-${Math.random()}`,albumName:"",performerName:"",musicAuthor:"",textAuthor:"",tracks:[]});F.value=$.value.map(i=>({albumName:"",tracks:i.tracks.map(()=>({performerName:"",musicAuthor:"",textAuthor:"",trackName:"",audioFile:""}))}))}},g=ce(()=>N().singleCount>0),j=ce(()=>N().albumCount>0),k=ce(()=>{const r=x.value.every((i,M)=>{var U,E,Z;return i.trackName.trim().split(/\s+/).length>=2&&i.audioFile!==null&&i.uploaded&&i.performerName.trim().split(/\s+/).length>=3&&!((U=h.value[M])!=null&&U.performerName)&&i.musicAuthor.trim().split(/\s+/).length>=3&&!((E=h.value[M])!=null&&E.musicAuthor)&&i.textAuthor.trim().split(/\s+/).length>=3&&!((Z=h.value[M])!=null&&Z.textAuthor)}),a=$.value.every((i,M)=>i.albumName.trim().split(/\s+/).length>=3&&i.tracks.length>0&&i.tracks.every((U,E)=>{var Z,de,W,Se,qe,Fe;return U.trackName.trim().split(/\s+/).length>=2&&U.audioFile!==null&&U.uploaded&&U.performerName.trim().split(/\s+/).length>=3&&!((de=(Z=F.value[M])==null?void 0:Z.tracks[E])!=null&&de.performerName)&&U.musicAuthor.trim().split(/\s+/).length>=3&&!((Se=(W=F.value[M])==null?void 0:W.tracks[E])!=null&&Se.musicAuthor)&&U.textAuthor.trim().split(/\s+/).length>=3&&!((Fe=(qe=F.value[M])==null?void 0:qe.tracks[E])!=null&&Fe.textAuthor)})),d=N();return(d.singleCount===0||r)&&(d.albumCount===0||a)}),v=r=>{if(!r.trim())return!1;const a=r.toLowerCase();return o.some(d=>a.includes(` ${d} `)||a.startsWith(`${d} `)||a.endsWith(` ${d}`)||a===d)},S=(r,a)=>r.trim()?r.trim().split(/\s+/).length>=a:!1,l=r=>{const a=x.value[r].performerName;let d="";return a.trim()?S(a,3)?v(a)&&(d='В поле "ФИО исполнителей" запрещено использовать слова: "нет", "такой", "информации", "не", "знаю", "откуда"'):d="ФИО исполнителя должно содержать минимум 3 слова (например: Иван Иванович Иванов)":d="ФИО исполнителя обязательно для заполнения",h.value[r].performerName=d,!d},_=r=>{const a=x.value[r].musicAuthor;let d="";return a.trim()?S(a,3)?v(a)&&(d='В поле "ФИО авторов музыки" запрещено использовать слова: "нет", "такой", "информации", "не", "знаю", "откуда"'):d="ФИО автора музыки должно содержать минимум 3 слова (например: Иван Иванович Иванов)":d="ФИО автора музыки обязательно для заполнения",h.value[r].musicAuthor=d,!d},J=r=>{const a=x.value[r].textAuthor;let d="";return a.trim()?S(a,3)?v(a)&&(d='В поле "ФИО авторов текста" запрещено использовать слова: "нет", "такой", "информации", "не", "знаю", "откуда"'):d="ФИО автора текста должно содержать минимум 3 слова (например: Иван Иванович Иванов)":d="ФИО автора текста обязательно для заполнения",h.value[r].textAuthor=d,!d},ee=r=>{const a=x.value[r].trackName;let d="";return a.trim()?S(a,2)||(d="Название трека должно содержать минимум 2 слова"):d="Название трека обязательно для заполнения",h.value[r].trackName=d,!d},fe=async r=>{let a=!0;return l(r)||(a=!1),_(r)||(a=!1),J(r)||(a=!1),ee(r)||(a=!1),x.value[r].audioFile?h.value[r].audioFile="":(h.value[r].audioFile="Аудио файл обязателен для загрузки",a=!1),a&&await p(),a},be=(r,a)=>{const d=$.value[r].tracks[a].performerName;let i="";return d.trim()?S(d,3)?v(d)&&(i='В поле "ФИО исполнителей" запрещено использовать слова: "нет", "такой", "информации", "не", "знаю", "откуда"'):i="ФИО исполнителя должно содержать минимум 3 слова (например: Иван Иванович Иванов)":i="ФИО исполнителя обязательно для заполнения",F.value[r].tracks[a].performerName=i,!i},$e=(r,a)=>{const d=$.value[r].tracks[a].musicAuthor;let i="";return d.trim()?S(d,3)?v(d)&&(i='В поле "ФИО авторов музыки" запрещено использовать слова: "нет", "такой", "информации", "не", "знаю", "откуда"'):i="ФИО автора музыки должно содержать минимум 3 слова (например: Иван Иванович Иванов)":i="ФИО автора музыки обязательно для заполнения",F.value[r].tracks[a].musicAuthor=i,!i},Ne=(r,a)=>{const d=$.value[r].tracks[a].textAuthor;let i="";return d.trim()?S(d,3)?v(d)&&(i='В поле "ФИО авторов текста" запрещено использовать слова: "нет", "такой", "информации", "не", "знаю", "откуда"'):i="ФИО автора текста должно содержать минимум 3 слова (например: Иван Иванович Иванов)":i="ФИО автора текста обязательно для заполнения",F.value[r].tracks[a].textAuthor=i,!i},q=(r,a)=>{const d=$.value[r].tracks[a].trackName;let i="";return d.trim()?S(d,2)||(i="Название трека должно содержать минимум 2 слова"):i="Название трека обязательно для заполнения",F.value[r].tracks[a].trackName=i,!i},y=r=>{const a=$.value[r].albumName;let d="";return a.trim()?S(a,3)?v(a)&&(d='В поле "Название альбома" запрещено использовать слова: "нет", "такой", "информации", "не", "знаю", "откуда"'):d="Название альбома должно содержать минимум 3 слова":d="Название альбома обязательно для заполнения",F.value[r].albumName=d,!d},b=async r=>{let a=!0;return y(r)||(a=!1),$.value[r].tracks.length===0&&(a=!1),a&&await p(),a},n=async(r,a)=>{let d=!0;return be(r,a)||(d=!1),$e(r,a)||(d=!1),Ne(r,a)||(d=!1),q(r,a)||(d=!1),$.value[r].tracks[a].audioFile?F.value[r].tracks[a].audioFile="":(F.value[r].tracks[a].audioFile="Аудио файл обязателен для загрузки",d=!1),d&&await p(),d},V=async(r,a)=>{var E;const d=a.target,i=(E=d.files)==null?void 0:E[0];if(!i)return;if(!["audio/mpeg","audio/wav","audio/flac","audio/aac","audio/ogg"].includes(i.type)){h.value[r].audioFile="Недопустимый формат файла. Разрешенные форматы: MP3, WAV, FLAC, AAC, OGG",Y.error("Недопустимый формат аудио файла");return}const U=50*1024*1024;if(i.size>U){h.value[r].audioFile="Файл слишком большой. Максимальный размер: 50MB",Y.error("Файл превышает максимальный допустимый размер");return}try{s.value=!0;const Z=await P(i);x.value[r].audioFile=i,x.value[r].audioFileName=i.name,x.value[r].audioFileSize=i.size,x.value[r].audioFileBase64=Z,x.value[r].uploaded=!0,x.value[r].hasAudioUploaded=!0,h.value[r].audioFile="",fe(r),await p(),d.value="",Y.success("Аудио файл успешно загружен")}catch(Z){console.error("Error uploading file:",Z),Y.error("Ошибка при загрузке файла")}finally{s.value=!1}},X=async(r,a,d)=>{var Z;const i=d.target,M=(Z=i.files)==null?void 0:Z[0];if(!M)return;if(!["audio/mpeg","audio/wav","audio/flac","audio/aac","audio/ogg"].includes(M.type)){F.value[r].tracks[a].audioFile="Недопустимый формат файла. Разрешенные форматы: MP3, WAV, FLAC, AAC, OGG",Y.error("Недопустимый формат аудио файла");return}const E=50*1024*1024;if(M.size>E){F.value[r].tracks[a].audioFile="Файл слишком большой. Максимальный размер: 50MB",Y.error("Файл превышает максимальный допустимый размер");return}try{s.value=!0;const de=await P(M);if(r>=0&&r<$.value.length){const W=$.value[r];a>=0&&a<W.tracks.length&&(W.tracks[a].audioFile=M,W.tracks[a].audioFileName=M.name,W.tracks[a].audioFileSize=M.size,W.tracks[a].audioFileBase64=de,W.tracks[a].uploaded=!0,F.value[r].tracks[a].audioFile="",await n(r,a),i.value="",Y.success(`Трек ${a+1} успешно загружен`))}}catch(de){console.error("Error uploading file:",de),Y.error("Ошибка при загрузке файла")}finally{s.value=!1}},H=r=>{const a=document.createElement("input");a.type="file",a.accept="audio/*",a.style.display="none",a.onchange=d=>V(r,d),document.body.appendChild(a),a.click(),document.body.removeChild(a)},K=(r,a)=>{const d=document.createElement("input");d.type="file",d.accept="audio/*",d.style.display="none",d.onchange=i=>X(r,a,i),document.body.appendChild(d),d.click(),document.body.removeChild(d)},te=async r=>{if(r>=0&&r<$.value.length){const a=$.value[r],d=a.tracks.length+1;a.tracks.push({id:`album-track-${Date.now()}-${Math.random()}`,trackNumber:d,trackName:"",performerName:a.performerName||"",musicAuthor:a.musicAuthor||"",textAuthor:a.textAuthor||"",audioFile:null,audioFileName:"",audioFileSize:0,audioFileBase64:"",uploaded:!1}),F.value[r].tracks.push({performerName:"",musicAuthor:"",textAuthor:"",trackName:"",audioFile:""}),await p(),Y.info("Трек добавлен в альбом")}},re=async(r,a)=>{if(r>=0&&r<$.value.length){const d=$.value[r];a>=0&&a<d.tracks.length&&(d.tracks.splice(a,1),F.value[r].tracks.splice(a,1),d.tracks.forEach((i,M)=>{i.trackNumber=M+1}),await p(),Y.info("Трек удален из альбома"))}},ie=async r=>{x.value[r].audioFile=null,x.value[r].audioFileName="",x.value[r].audioFileSize=0,x.value[r].audioFileBase64="",x.value[r].uploaded=!1,x.value[r].hasAudioUploaded=!1,h.value[r].audioFile="",await p(),Y.info("Аудио файл удален")},se=async(r,a)=>{if(r>=0&&r<$.value.length){const d=$.value[r];a>=0&&a<d.tracks.length&&(d.tracks[a].audioFile=null,d.tracks[a].audioFileName="",d.tracks[a].audioFileSize=0,d.tracks[a].audioFileBase64="",d.tracks[a].uploaded=!1,F.value[r].tracks[a].audioFile="",await p(),Y.info("Аудио файл трека удален"))}},Ce=r=>{if(r===0)return"0 Bytes";const a=1024,d=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(r)/Math.log(a));return parseFloat((r/Math.pow(a,i)).toFixed(2))+" "+d[i]},Le=(r,a)=>{switch(a){case"performerName":l(r);break;case"musicAuthor":_(r);break;case"textAuthor":J(r);break;case"trackName":ee(r);break}p()},we=(r,a,d)=>{switch(d){case"performerName":be(r,a);break;case"musicAuthor":$e(r,a);break;case"textAuthor":Ne(r,a);break;case"trackName":q(r,a);break}p()},tt=r=>{y(r),p()},Ue=async()=>{t.value?t.value=!1:(await p(),Q("go-back"))},st=async()=>{let r=!0;for(let a=0;a<x.value.length;a++)await fe(a)||(r=!1);for(let a=0;a<$.value.length;a++){const d=$.value[a];await b(a)||(r=!1);for(let i=0;i<d.tracks.length;i++)await n(a,i)||(r=!1)}r?(await p(),t.value=!0):Y.error("Пожалуйста, заполните все обязательные поля и загрузите аудио файлы")},lt=async()=>{try{await p(),Q("go-next")}catch(r){console.error("Error accepting conditions:",r),Y.error("Ошибка при переходе к следующему шагу")}};return ze(async()=>{try{s.value=!0,await G(),m(),L.value=!0,console.log("Component mounted, data loaded:",{singles:x.value.length,albums:$.value.length,showSingles:g.value,showAlbums:j.value})}catch(r){console.error("Error in onMounted:",r),Y.error("Ошибка при загрузке данных")}finally{s.value=!1}}),window.addEventListener("beforeunload",async()=>{await p()}),document.addEventListener("visibilitychange",async()=>{document.visibilityState==="hidden"&&await p()}),(r,a)=>(u(),c(ue,null,[t.value?f("",!0):(u(),c("div",wt,[a[15]||(a[15]=le('<div class="quiz__form_top" data-v-d532357f><h4 class="quiz__form_head" data-v-d532357f>Загрузка синглов и альбомов</h4><button class="quiz__additional button__second button" data-v-d532357f><span data-v-d532357f>Дополнительная информация</span></button></div><div class="quiz__form_two_empty" data-v-d532357f><div class="quiz__form_two_lists" data-v-d532357f><p class="quiz__form_two_description text_small" data-v-d532357f>Отметить артистов можно 3 способами:</p><ul class="quiz__form_two_list" data-v-d532357f><li class="quiz__form_two_item" data-v-d532357f><p class="quiz__form_two_description text_small" data-v-d532357f>Артист 1, Артист 2 (через запятую). Тогда оба артиста будут считаться основными, у всех появится своя карточка артиста, в которые попадёт релиз (либо попадёт в существующие, если карточки уже есть).</p></li><li class="form__hint_item" data-v-d532357f><p class="form__hint text_small" data-v-d532357f>Артист 1 feat Артист 2. Тут второй артист будет считаться второстепенным, релиз не отобразится у него в карточке. Если у Артист 2 нет карточки, то новая ему не создастся.</p></li><li class="form__hint_item" data-v-d532357f><p class="form__hint text_small" data-v-d532357f>Артист 1 &amp; Артист 2. В таком случае оба артиста будут считаться коллективом, для которого создастся отдельная карточка. У каждого артиста по отдельности карточки не будет, а релиз в них не попадёт.</p></li></ul><p class="quiz__form_two_description text_small" data-v-d532357f>Это все возможные варианты, отмечать артистов через &quot;х&quot; или другие знаки нельзя - площадки не принимают подобные релизы.</p><p class="quiz__form_two_description text_small" data-v-d532357f>Если вы хотите, чтобы рядом с названием трека серым цветом отображался Prod. by, то укажите это в скобках названия трека.</p></div></div>',2)),g.value&&L.value?(u(),c("div",Bt,[a[4]||(a[4]=e("h4",{class:"quiz__section_title"},"Синглы",-1)),x.value.length>0?(u(),c("div",Mt,[(u(!0),c(ue,null,he(x.value,(d,i)=>{var M,U,E,Z,de;return u(),c("div",{key:d.id,class:"quiz__single_item"},[e("h5",Ut,"Сингл "+C(i+1),1),d.hasAudioUploaded?(u(),c("div",Dt,[e("div",Pt,[e("div",Et,[e("p",Rt,C(d.audioFileName),1),e("p",Ot,C(Ce(d.audioFileSize)),1)]),e("div",{class:"quiz__form_single_name_svg",onClick:W=>ie(i)},[z(Te)],8,Gt)])])):f("",!0),d.hasAudioUploaded?(u(),c("div",Yt,[e("div",Qt,[a[0]||(a[0]=e("label",{class:"form__label button"},[B("ФИО исполнителей"),e("span",null,"*")],-1)),z(A(D),{modelValue:d.performerName,"onUpdate:modelValue":W=>d.performerName=W,type:"text",placeholder:"Введите ФИО исполнителя",disabled:s.value,size:"large",onInput:()=>Le(i,"performerName"),onBlur:W=>l(i)},null,8,["modelValue","onUpdate:modelValue","disabled","onInput","onBlur"]),(M=h.value[i])!=null&&M.performerName?(u(),c("div",It,C(h.value[i].performerName),1)):f("",!0)]),e("div",Jt,[a[1]||(a[1]=e("label",{class:"form__label button"},[B("ФИО авторов музыки"),e("span",null,"*")],-1)),z(A(D),{modelValue:d.musicAuthor,"onUpdate:modelValue":W=>d.musicAuthor=W,type:"text",placeholder:"Введите ФИО автора музыки",disabled:s.value,size:"large",onInput:()=>Le(i,"musicAuthor"),onBlur:W=>_(i)},null,8,["modelValue","onUpdate:modelValue","disabled","onInput","onBlur"]),(U=h.value[i])!=null&&U.musicAuthor?(u(),c("div",Kt,C(h.value[i].musicAuthor),1)):f("",!0)]),e("div",jt,[a[2]||(a[2]=e("label",{class:"form__label button"},[B("ФИО авторов текста"),e("span",null,"*")],-1)),z(A(D),{modelValue:d.textAuthor,"onUpdate:modelValue":W=>d.textAuthor=W,type:"text",placeholder:"Введите ФИО автора текста",disabled:s.value,size:"large",onInput:()=>Le(i,"textAuthor"),onBlur:W=>J(i)},null,8,["modelValue","onUpdate:modelValue","disabled","onInput","onBlur"]),(E=h.value[i])!=null&&E.textAuthor?(u(),c("div",Wt,C(h.value[i].textAuthor),1)):f("",!0)]),e("div",Ht,[a[3]||(a[3]=le('<label class="form__label button" data-v-d532357f>полное название трека<span data-v-d532357f>*</span></label><ul class="form__hint_list" data-v-d532357f><li class="form__hint_item" data-v-d532357f><p class="form__hint text_small" data-v-d532357f>Укажите полное название трека, включая псевдонимы и версии. Если загружаете альбом, то напишите номер каждого трека.</p></li><li class="form__hint_item" data-v-d532357f><p class="form__hint text_small" data-v-d532357f>Например: «1. Artist 1, Artist 2 – Best Song (Prod. by Beatmaker)»</p></li><li class="form__hint_item" data-v-d532357f><p class="form__hint text_small" data-v-d532357f>Не должно быть изображений/фотографий популярных людей или персонажей, если на это нет документального подтверждения правообладателя.</p></li><li class="form__hint_item" data-v-d532357f><p class="form__hint text_small" data-v-d532357f>Если название на русском языке, не допускается писать «Каждое Слово С Большой Буквы». (название может быть написано «полностью маленькими буквами»).</p></li><li class="form__hint_item" data-v-d532357f><p class="form__hint text_small" data-v-d532357f>Писать названия транслитом нельзя (например, нельзя писать «privet». Либо «Привет», либо «Hello»).</p></li><li class="form__hint_item" data-v-d532357f><p class="form__hint text_small" data-v-d532357f>Использовать в названии треков 2+ языков нельзя (например, нельзя «Дорога to Success»)</p></li></ul>',2)),z(A(D),{modelValue:d.trackName,"onUpdate:modelValue":W=>d.trackName=W,type:"text",placeholder:"Введите название трека",disabled:s.value,size:"large",onInput:()=>Le(i,"trackName"),onBlur:W=>ee(i)},null,8,["modelValue","onUpdate:modelValue","disabled","onInput","onBlur"]),(Z=h.value[i])!=null&&Z.trackName?(u(),c("div",Xt,C(h.value[i].trackName),1)):f("",!0)])])):f("",!0),d.hasAudioUploaded?f("",!0):(u(),c("div",Zt,[e("button",{class:"quiz__form_single_button button__red button",onClick:()=>H(i),disabled:s.value},[s.value?(u(),c("span",ss,"Загрузка...")):(u(),c("span",ts,"добавить трек"))],8,es)])),(de=h.value[i])!=null&&de.audioFile&&!d.hasAudioUploaded?(u(),c("div",ls,C(h.value[i].audioFile),1)):f("",!0)])}),128))])):f("",!0)])):f("",!0),j.value&&L.value?(u(),c("div",as,[$.value.length>0?(u(),c("div",os,[(u(!0),c(ue,null,he($.value,(d,i)=>{var M;return u(),c("div",{key:d.id,class:"quiz__album_item"},[e("h5",rs,"Альбом "+C(i+1),1),e("div",is,[e("div",ns,[a[5]||(a[5]=e("label",{class:"form__label button"},[B("Название альбома"),e("span",null,"*")],-1)),z(A(D),{modelValue:d.albumName,"onUpdate:modelValue":U=>d.albumName=U,type:"text",placeholder:"Введите название альбома",disabled:s.value,size:"large",onInput:()=>tt(i),onBlur:U=>y(i)},null,8,["modelValue","onUpdate:modelValue","disabled","onInput","onBlur"]),(M=F.value[i])!=null&&M.albumName?(u(),c("div",us,C(F.value[i].albumName),1)):f("",!0)])]),e("div",ds,[e("div",ms,[(u(!0),c(ue,null,he(d.tracks,(U,E)=>{var Z,de,W,Se,qe,Fe,Ye,Qe,Ie,Je;return u(),c("div",{key:U.id,class:"quiz__album_track_item"},[d.tracks.length>1?(u(),c("div",_s,[e("button",{class:"quiz__album_track_remove button__red button",onClick:ne=>re(i,E)},a[6]||(a[6]=[e("span",null,"Удалить",-1)]),8,cs)])):f("",!0),U.audioFile?(u(),c("div",ps,[e("div",fs,[e("div",vs,[e("p",gs,C(U.audioFileName),1),e("p",ks,C(Ce(U.audioFileSize)),1)]),e("div",{class:"quiz__form_single_name_svg",onClick:ne=>se(i,E)},[z(Te)],8,bs)])])):f("",!0),e("div",hs,[e("div",ys,[a[7]||(a[7]=e("label",{class:"form__label button"},[B("ФИО исполнителей"),e("span",null,"*")],-1)),z(A(D),{modelValue:U.performerName,"onUpdate:modelValue":ne=>U.performerName=ne,type:"text",placeholder:"Введите ФИО исполнителя",disabled:s.value,size:"large",onInput:()=>we(i,E,"performerName"),onBlur:ne=>be(i,E)},null,8,["modelValue","onUpdate:modelValue","disabled","onInput","onBlur"]),(de=(Z=F.value[i])==null?void 0:Z.tracks[E])!=null&&de.performerName?(u(),c("div",zs,C(F.value[i].tracks[E].performerName),1)):f("",!0)]),e("div",$s,[a[8]||(a[8]=e("label",{class:"form__label button"},[B("ФИО авторов музыки"),e("span",null,"*")],-1)),z(A(D),{modelValue:U.musicAuthor,"onUpdate:modelValue":ne=>U.musicAuthor=ne,type:"text",placeholder:"Введите ФИО автора музыки",disabled:s.value,size:"large",onInput:()=>we(i,E,"musicAuthor"),onBlur:ne=>$e(i,E)},null,8,["modelValue","onUpdate:modelValue","disabled","onInput","onBlur"]),(Se=(W=F.value[i])==null?void 0:W.tracks[E])!=null&&Se.musicAuthor?(u(),c("div",Ns,C(F.value[i].tracks[E].musicAuthor),1)):f("",!0)]),e("div",Cs,[a[9]||(a[9]=e("label",{class:"form__label button"},[B("ФИО авторов текста"),e("span",null,"*")],-1)),z(A(D),{modelValue:U.textAuthor,"onUpdate:modelValue":ne=>U.textAuthor=ne,type:"text",placeholder:"Введите ФИО автора текста",disabled:s.value,size:"large",onInput:()=>we(i,E,"textAuthor"),onBlur:ne=>Ne(i,E)},null,8,["modelValue","onUpdate:modelValue","disabled","onInput","onBlur"]),(Fe=(qe=F.value[i])==null?void 0:qe.tracks[E])!=null&&Fe.textAuthor?(u(),c("div",Ss,C(F.value[i].tracks[E].textAuthor),1)):f("",!0)]),e("div",qs,[a[10]||(a[10]=le('<label class="form__label button" data-v-d532357f>полное название трека<span data-v-d532357f>*</span></label><ul class="form__hint_list" data-v-d532357f><li class="form__hint_item" data-v-d532357f><p class="form__hint text_small" data-v-d532357f>Укажите полное название трека, включая псевдонимы и версии. Если загружаете альбом, то напишите номер каждого трека.</p></li><li class="form__hint_item" data-v-d532357f><p class="form__hint text_small" data-v-d532357f>Например: «1. Artist 1, Artist 2 – Best Song (Prod. by Beatmaker)»</p></li><li class="form__hint_item" data-v-d532357f><p class="form__hint text_small" data-v-d532357f>Не должно быть изображений/фотографий популярных людей или персонажей, если на это нет документального подтверждения правообладателя.</p></li><li class="form__hint_item" data-v-d532357f><p class="form__hint text_small" data-v-d532357f>Если название на русском языке, не допускается писать «Каждое Слово С Большой Буквы». (название может быть написано «полностью маленькими буквами»).</p></li><li class="form__hint_item" data-v-d532357f><p class="form__hint text_small" data-v-d532357f>Писать названия транслитом нельзя (например, нельзя писать «privet». Либо «Привет», либо «Hello»).</p></li><li class="form__hint_item" data-v-d532357f><p class="form__hint text_small" data-v-d532357f>Использовать в названии треков 2+ языков нельзя (например, нельзя «Дорога to Success»)</p></li></ul>',2)),z(A(D),{modelValue:U.trackName,"onUpdate:modelValue":ne=>U.trackName=ne,type:"text",placeholder:"Введите название трека",disabled:s.value,size:"large",onInput:()=>we(i,E,"trackName"),onBlur:ne=>q(i,E)},null,8,["modelValue","onUpdate:modelValue","disabled","onInput","onBlur"]),(Qe=(Ye=F.value[i])==null?void 0:Ye.tracks[E])!=null&&Qe.trackName?(u(),c("div",Fs,C(F.value[i].tracks[E].trackName),1)):f("",!0)])]),U.audioFile?f("",!0):(u(),c("div",Vs,[e("button",{class:"quiz__form_single_button button__red button",onClick:()=>K(i,E),disabled:s.value},[s.value?(u(),c("span",Ts,"Загрузка...")):(u(),c("span",As,"загрузить трек "+C(U.trackNumber),1))],8,xs)])),(Je=(Ie=F.value[i])==null?void 0:Ie.tracks[E])!=null&&Je.audioFile&&!U.audioFile?(u(),c("div",Ls,C(F.value[i].tracks[E].audioFile),1)):f("",!0)])}),128))]),e("div",ws,[e("button",{class:"quiz__form_single_button button__red button",onClick:()=>te(i),disabled:s.value},a[11]||(a[11]=[e("span",null,"+ Добавить трек в альбом",-1)]),8,Bs)])])])}),128))])):f("",!0)])):f("",!0),L.value&&(g.value&&x.value.length>0||j.value&&$.value.length>0)?(u(),c("div",Ms,[e("div",Us,[e("button",{class:"form__back button__second button",onClick:Ue,disabled:s.value},[e("span",null,[z(pe)]),a[12]||(a[12]=e("span",null,"Назад",-1))],8,Ds),e("button",{class:"quiz__form_button button__black button",onClick:st,disabled:!k.value||s.value},[s.value?(u(),c("span",Rs,"Сохранение...")):(u(),c("span",Es,"Продолжить"))],8,Ps)])])):L.value?(u(),c("div",Os,[a[14]||(a[14]=e("p",{class:"quiz__no_items_text"},"Не выбрано ни одного сингла или альбома. Вернитесь на предыдущий шаг.",-1)),e("div",Gs,[e("div",Ys,[e("button",{class:"form__back button__second button",onClick:Ue,disabled:s.value},[e("span",null,[z(pe)]),a[13]||(a[13]=e("span",null,"Назад",-1))],8,Qs)])])])):f("",!0)])),t.value?(u(),c("div",Is,[a[17]||(a[17]=le('<h4 class="quiz__important_head" data-v-d532357f>важно!</h4><ul class="quiz__important_list" data-v-d532357f><li class="quiz__important_item" data-v-d532357f><p class="quiz__important_description" data-v-d532357f>В ваших треках не должно быть пиратского контента, т.е. сэмплов и иных кусков чужих популярных треков, на которые у вас нет документального разрешения от авторов (скрин переписки не подойдёт, только договор передачи прав)!</p></li><li class="quiz__important_item" data-v-d532357f><p class="quiz__important_description" data-v-d532357f>Отрывки и сэмплы даже длительностью 1, 3, 5 и т.д. секунд НЕ ДОПУСКАЮТСЯ и НЕ ПРОЙДУТ модерацию.</p></li><li class="quiz__important_item" data-v-d532357f><p class="quiz__important_description" data-v-d532357f>Если в ваших треках использованы элементы чужих авторов без их разрешения, то нужно либо убрать эти элементы, либо не загружать такой трек. Приписка «Кавер»,«Cover» или любая другая не даёт права использовать материалы чужих авторов без их письменного согласия.</p></li><li class="quiz__important_item" data-v-d532357f><p class="quiz__important_description" data-v-d532357f>Если вы грузите подобный контент, то соглашаетесь с тем, что делаете это на свой страх и риск. В случае не выхода трека по причине использования пиратского контента, оплата за загрузку НЕ ВОЗВРАЩАЕТСЯ.</p></li></ul>',2)),e("div",Js,[e("div",Ks,[e("button",{class:"form__back button__second button",onClick:Ue,disabled:s.value},[e("span",null,[z(pe)]),a[16]||(a[16]=e("span",null,"Назад",-1))],8,js),e("button",{class:"quiz__form_button button__black button",onClick:lt,disabled:s.value},[s.value?(u(),c("span",Xs,"Переход...")):(u(),c("span",Hs,"принимаю"))],8,Ws)])])])):f("",!0)],64))}}),el=ae(Zs,[["__scopeId","data-v-d532357f"]]),tl={},sl={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"};function ll(oe,I){return u(),c("svg",sl,I[0]||(I[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.88558 3.36262C11.8283 0.545795 16.5864 0.545795 19.5291 3.36262C22.4903 6.19714 22.4903 10.807 19.5291 13.6415L11.581 21.2495C9.49097 23.2502 6.11532 23.2502 4.02525 21.2495C1.91669 19.2312 1.91669 15.9446 4.02525 13.9263L11.859 6.42771C13.0964 5.24324 15.0896 5.24325 16.327 6.42771C17.5829 7.62989 17.5829 9.59316 16.327 10.7953L8.43612 18.3486C8.13689 18.635 7.66213 18.6247 7.37571 18.3254C7.08929 18.0262 7.09967 17.5515 7.39889 17.265L15.2898 9.71175C15.9286 9.10021 15.9286 8.12285 15.2898 7.5113C14.6324 6.88205 13.5536 6.88205 12.8962 7.5113L5.06248 15.0098C3.57095 16.4376 3.57095 18.7382 5.06248 20.1659C6.57251 21.6114 9.03377 21.6114 10.5438 20.1659L18.4919 12.5579C20.836 10.314 20.836 6.6901 18.4919 4.4462C16.1292 2.1846 12.2855 2.1846 9.9228 4.4462L3.51861 10.5764C3.21939 10.8628 2.74463 10.8524 2.45821 10.5532C2.17179 10.254 2.18216 9.77924 2.48139 9.49281L8.88558 3.36262Z",fill:"currentColor"},null,-1)]))}const Ge=ae(tl,[["render",ll]]),al={key:0,class:"quiz__form quiz__form_three"},ol={class:"quiz__form_single"},rl={class:"form__flex"},il={class:"form__group"},nl={key:0,class:"error text_very"},ul={class:"form__group"},dl={key:0,class:"error text_very"},ml={class:"form__group"},_l={key:0,class:"error text_very"},cl={key:1,class:"form__group_inner"},pl={key:0,class:"error text_very"},fl={class:"form__group"},vl={key:0,class:"error text_very"},gl={class:"form__group"},kl={key:0,class:"error text_very"},bl={key:1,class:"form__group_inner"},hl={key:0,class:"error text_very"},yl={class:"form__group"},zl={class:"quiz__form_cover_upload_icon"},$l={key:0,class:"quiz__form_single_name"},Nl={class:"quiz__form_single_name_left"},Cl={class:"quiz__form_single_name_text"},Sl={class:"quiz__form_single_name_size text_small"},ql={key:1,class:"error text_very quiz__form_single_error"},Fl={class:"form__group"},Vl={key:0,class:"error text_very"},xl={class:"form__group"},Al={key:0,class:"error text_very"},Tl={class:"quiz__form_bottom"},Ll={class:"quiz__form_buttons"},wl=["disabled"],Bl={key:0},Ml={key:1},Ul={key:1,class:"quiz__form quiz__important"},Dl={class:"quiz__form_bottom"},Pl={class:"quiz__form_buttons"},El=["disabled"],De="quiz3_state",Rl=_e({__name:"Quiz3",emits:["go-back","go-next"],setup(oe,{emit:I}){const Q=I,s=O(!1),t=ye({performerName:"",releaseName:"",platforms:[],otherPlatform:"",releaseDate:"",hasProfanity:"",profanityTracks:"",coverFile:null,vkLink:"",email:""}),o=ye({performerName:"",releaseName:"",platforms:"",otherPlatform:"",releaseDate:"",hasProfanity:"",profanityTracks:"",coverFile:"",vkLink:"",email:""}),h=O(!1),F=O(""),x=O(0),$=O(!1),L=[{label:"Все площадки",value:"all"},{label:"Другое",value:"other"}],P=[{label:"Да",value:"yes"},{label:"Нет",value:"no"}],R=ce(()=>{const q=[t.performerName.trim(),t.releaseName.trim(),t.platforms.length>0,t.releaseDate.trim(),t.hasProfanity.trim(),t.coverFile!==null,t.vkLink.trim(),t.email.trim()];return t.platforms.includes("other")&&q.push(t.otherPlatform.trim().length>0),t.hasProfanity==="yes"&&q.push(t.profanityTracks.trim().length>0),q.every(Boolean)}),T=()=>{try{const q={formData:{...t,coverFile:t.coverFile?{name:t.coverFile.name,size:t.coverFile.size,type:t.coverFile.type}:null},coverFileName:F.value,coverFileSize:x.value,showImportantBlock:s.value};localStorage.setItem(De,JSON.stringify(q))}catch(q){console.error("Error saving state to localStorage:",q)}},p=()=>{try{const q=localStorage.getItem(De);if(q){const y=JSON.parse(q);Object.assign(t,y.formData),t.coverFile=null,F.value=y.coverFileName||"",x.value=y.coverFileSize||0,s.value=!1}}catch(q){console.error("Error loading state from localStorage:",q)}},G=()=>{localStorage.removeItem(De)},N=q=>{try{return new URL(q),!0}catch{return!1}},m=q=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(q),g=()=>{let q=!0;if(Object.keys(o).forEach(y=>{o[y]=""}),t.performerName.trim()?t.performerName.trim().length<2&&(o.performerName="Псевдоним артиста должен содержать минимум 2 символа",q=!1):(o.performerName="Псевдоним артиста обязателен для заполнения",q=!1),t.releaseName.trim()?t.releaseName.trim().length<2&&(o.releaseName="Название релиза должно содержать минимум 2 символа",q=!1):(o.releaseName="Название релиза обязательно для заполнения",q=!1),t.platforms.length===0&&(o.platforms="Выберите хотя бы одну площадку для загрузки",q=!1),t.platforms.includes("other")&&!t.otherPlatform.trim()&&(o.otherPlatform="Напишите в свободной форме, на какие площадки нужно (или не нужно) загрузить релиз",q=!1),!t.releaseDate)o.releaseDate="Выберите желаемую дату выхода",q=!1;else{const y=Me(t.releaseDate),b=Me().startOf("day");y.isBefore(b)&&(o.releaseDate="Дата релиза не может быть в прошлом",q=!1)}return t.hasProfanity||(o.hasProfanity="Укажите, есть ли в треках мат",q=!1),t.hasProfanity==="yes"&&!t.profanityTracks.trim()&&(o.profanityTracks="Укажите номера треков с матом",q=!1),t.coverFile||(o.coverFile="Обложка релиза обязательна для загрузки",q=!1),t.vkLink.trim()?N(t.vkLink)?!t.vkLink.includes("vk.com/")&&!t.vkLink.includes("instagram.com/")&&(o.vkLink="Ссылка должна вести на VK (vk.com) или Instagram (instagram.com)",q=!1):(o.vkLink="Введите корректную ссылку (начинается с https://)",q=!1):(o.vkLink="Ссылка на страницу обязательна для заполнения",q=!1),t.email.trim()?m(t.email)||(o.email="Введите корректный адрес электронной почты",q=!1):(o.email="Электронная почта обязательна для заполнения",q=!1),q},j=q=>{if(!["image/jpeg","image/jpg","image/png"].includes(q.type)){o.coverFile="Недопустимый формат файла. Разрешенные форматы: JPG, JPEG, PNG",Y.error("Недопустимый формат изображения");return}const b=12*1024*1024;if(q.size>b){o.coverFile="Файл слишком большой. Максимальный размер: 12MB",Y.error("Файл превышает максимальный допустимый размер");return}const n=new Image;n.onload=()=>{if(n.width<1500||n.height<1500){o.coverFile="Изображение слишком маленькое. Минимальный размер: 1500x1500 пикселей",Y.error("Изображение не соответствует требованиям по размеру");return}if(n.width>4e3||n.height>4e3){o.coverFile="Изображение слишком большое. Максимальный размер: 4000x4000 пикселей",Y.error("Изображение не соответствует требованиям по размеру");return}if(Math.abs(n.width-n.height)>1){o.coverFile="Изображение должно быть квадратным (одинаковая ширина и высота)",Y.error("Изображение должно быть квадратным");return}o.coverFile="",t.coverFile=q,F.value=q.name,x.value=q.size,T(),Y.success("Обложка успешно загружена")},n.onerror=()=>{o.coverFile="Не удалось загрузить изображение. Проверьте файл",Y.error("Ошибка загрузки изображения")},n.src=URL.createObjectURL(q)},k=q=>{var n;const b=(n=q.target.files)==null?void 0:n[0];b&&j(b)},v=()=>{const q=document.createElement("input");q.type="file",q.accept="image/jpeg,image/jpg,image/png",q.style.display="none",q.onchange=k,document.body.appendChild(q),q.click(),document.body.removeChild(q)},S=q=>{q.preventDefault(),$.value=!0},l=q=>{q.preventDefault(),$.value=!1},_=q=>{var n;q.preventDefault(),$.value=!1;const y=(n=q.dataTransfer)==null?void 0:n.files;if(!y||y.length===0)return;const b=y[0];j(b)},J=()=>{t.coverFile=null,F.value="",x.value=0,o.coverFile="",T(),Y.info("Обложка удалена")},ee=q=>{if(q===0)return"0 Bytes";const y=1024,b=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(q)/Math.log(y));return parseFloat((q/Math.pow(y,n)).toFixed(2))+" "+b[n]},fe=q=>q.getTime()<Date.now()-24*60*60*1e3,be=()=>{s.value?(s.value=!1,T()):Q("go-back")},$e=()=>{g()&&(s.value=!0,T())},Ne=()=>{G(),Q("go-next")};return me(()=>t,()=>{T()},{deep:!0}),me(()=>t.hasProfanity,q=>{q==="no"&&(t.profanityTracks="")}),me(()=>t.platforms,q=>{q.includes("other")||(t.otherPlatform="")}),ze(()=>{p(),s.value=!1}),Ze(()=>{}),(q,y)=>(u(),c(ue,null,[s.value?f("",!0):(u(),c("div",al,[y[28]||(y[28]=e("h4",{class:"quiz__form_head"},"Информация о треке",-1)),e("div",ol,[e("div",rl,[e("div",il,[y[15]||(y[15]=e("label",{for:"performerName",class:"form__label button"},[B("впишите псевдоним артиста"),e("span",null,"*")],-1)),y[16]||(y[16]=e("p",{class:"form__hint text_small"},"Укажите имя артиста (ваш псевдоним). Даже если трек совместный, укажите только один свой псевдоним.",-1)),z(A(D),{id:"performerName",modelValue:t.performerName,"onUpdate:modelValue":y[0]||(y[0]=b=>t.performerName=b),type:"text",class:w({error:o.performerName}),placeholder:"Введите псевдоним артиста",disabled:h.value,onBlur:g,onInput:y[1]||(y[1]=b=>o.performerName=""),size:"large"},null,8,["modelValue","class","disabled"]),o.performerName?(u(),c("div",nl,C(o.performerName),1)):f("",!0)]),e("div",ul,[y[17]||(y[17]=le('<label for="releaseName" class="form__label button" data-v-4f9e0fef>впишите название релиза<span data-v-4f9e0fef>*</span></label><ul class="form__hint_list" data-v-4f9e0fef><li class="form__hint_item" data-v-4f9e0fef><p class="form__hint text_small" data-v-4f9e0fef>Если вы выбрали несколько релизов (например, 2 сингла), впишите их названия через запятую.</p></li><li class="form__hint_item" data-v-4f9e0fef><p class="form__hint text_small" data-v-4f9e0fef>Перечислять названия треков с альбома не нужно.</p></li><li class="form__hint_item" data-v-4f9e0fef><p class="form__hint text_small" data-v-4f9e0fef>Писать названия транслитом нельзя (например, нельзя писать &quot;privet&quot;, либо &quot;Привет&quot;, либо &quot;Hello&quot;).</p></li></ul>',2)),z(A(D),{id:"releaseName",modelValue:t.releaseName,"onUpdate:modelValue":y[2]||(y[2]=b=>t.releaseName=b),type:"text",class:w({error:o.releaseName}),placeholder:"Введите название релиза",disabled:h.value,onBlur:g,onInput:y[3]||(y[3]=b=>o.releaseName=""),size:"large"},null,8,["modelValue","class","disabled"]),o.releaseName?(u(),c("div",dl,C(o.releaseName),1)):f("",!0)]),e("div",ml,[y[18]||(y[18]=e("label",{class:"form__label button"},[B("Куда загружать релиз?"),e("span",null,"*")],-1)),z(A(Ae),{modelValue:t.platforms,"onUpdate:modelValue":y[4]||(y[4]=b=>t.platforms=b),multiple:"",placeholder:"Выберите площадки",class:w({error:o.platforms}),size:"large",onChange:g},{default:ke(()=>[(u(),c(ue,null,he(L,b=>z(A(xe),{key:b.value,label:b.label,value:b.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","class"]),o.platforms?(u(),c("div",_l,C(o.platforms),1)):f("",!0),t.platforms.includes("other")?(u(),c("div",cl,[z(A(D),{modelValue:t.otherPlatform,"onUpdate:modelValue":y[5]||(y[5]=b=>t.otherPlatform=b),type:"text",placeholder:"Укажите другие площадки",class:w({error:o.otherPlatform}),onBlur:g,onInput:y[6]||(y[6]=b=>o.otherPlatform=""),size:"large"},null,8,["modelValue","class"]),o.otherPlatform?(u(),c("div",pl,C(o.otherPlatform),1)):f("",!0)])):f("",!0)]),e("div",fl,[y[19]||(y[19]=le('<label class="form__label button" data-v-4f9e0fef>Желаемая дата выхода<span data-v-4f9e0fef>*</span></label><ul class="form__hint_list" data-v-4f9e0fef><li class="form__hint_item" data-v-4f9e0fef><p class="form__hint text_small" data-v-4f9e0fef>Если все равно, ставьте ближайшую пятницу. Выбирайте дату с учётом официальных праздников (особенно в Новый Год)! Во время них модерация не проверяет релизы.</p></li><li class="form__hint_item" data-v-4f9e0fef><p class="form__hint text_small" data-v-4f9e0fef>Заложите минимум 3 полных рабочих дня (выходные и праздники не считаются). Если релиз важный, то рекомендуем заложить 7-10 рабочих дней: на случай возвратов, ошибок и вопросов со стороны модерации...</p></li><li class="form__hint_item" data-v-4f9e0fef><p class="form__hint text_small" data-v-4f9e0fef>Если дата релиза важна, то рекомендуется заложить минимум 7 дней на загрузку. Также площадка <a href="https://music.apple.com/" data-v-4f9e0fef>Apple Music</a> сообщает, что отображение релиза на их площадке может занять до 5 рабочих дней с момента прохождения модерации. Рекомендуем учитывать это при выборе даты релиза.</p></li></ul>',2)),z(A(et),{modelValue:t.releaseDate,"onUpdate:modelValue":y[7]||(y[7]=b=>t.releaseDate=b),type:"date",placeholder:"Выберите дату",format:"DD.MM.YYYY","value-format":"YYYY-MM-DD","disabled-date":fe,class:w({error:o.releaseDate}),size:"large",style:{width:"100%"},onChange:g},null,8,["modelValue","class"]),o.releaseDate?(u(),c("div",vl,C(o.releaseDate),1)):f("",!0)]),e("div",gl,[y[21]||(y[21]=le('<label class="form__label button" data-v-4f9e0fef>в треках есть мат?<span data-v-4f9e0fef>*</span></label><ul class="form__hint_list" data-v-4f9e0fef><li class="form__hint_item" data-v-4f9e0fef><p class="form__hint text_small" data-v-4f9e0fef>Укажите номера треков, в которых есть мат. Если загружаете один трек, то ставьте 1.</p></li><li class="form__hint_item" data-v-4f9e0fef><p class="form__hint text_small" data-v-4f9e0fef>Важно про мат! Мат считается на всех языках, вульгарная лексика также принимается за мат. В данном случае не существует &quot;литературного&quot; мата, считаются все &quot;неприличные&quot; слова. Невнимательное заполнение данного поля может задержать выход релиза.</p></li></ul>',2)),z(A(Ae),{modelValue:t.hasProfanity,"onUpdate:modelValue":y[8]||(y[8]=b=>t.hasProfanity=b),placeholder:"Выберите ответ",class:w({error:o.hasProfanity}),size:"large",onChange:g},{default:ke(()=>[(u(),c(ue,null,he(P,b=>z(A(xe),{key:b.value,label:b.label,value:b.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","class"]),o.hasProfanity?(u(),c("div",kl,C(o.hasProfanity),1)):f("",!0),t.hasProfanity==="yes"?(u(),c("div",bl,[y[20]||(y[20]=e("p",{class:"form__hint text_small"},"Укажите номера треков",-1)),z(A(D),{modelValue:t.profanityTracks,"onUpdate:modelValue":y[9]||(y[9]=b=>t.profanityTracks=b),type:"text",placeholder:"Например: 1, 3, 5",class:w({error:o.profanityTracks}),onBlur:g,onInput:y[10]||(y[10]=b=>o.profanityTracks=""),size:"large"},null,8,["modelValue","class"]),o.profanityTracks?(u(),c("div",hl,C(o.profanityTracks),1)):f("",!0)])):f("",!0)]),e("div",yl,[y[23]||(y[23]=le('<label class="form__label button" data-v-4f9e0fef>Прикрепите обложку релиза<span data-v-4f9e0fef>*</span></label><ul class="form__hint_list" data-v-4f9e0fef><li class="form__hint_item" data-v-4f9e0fef><p class="form__hint text_small" data-v-4f9e0fef>Для обложек, созданных с помощью AI, необходимо добавлять уникальные элементы: псевдоним и/или название релиза.</p></li><li class="form__hint_item" data-v-4f9e0fef><p class="form__hint text_small" data-v-4f9e0fef>Обложка должна быть квадратная, размером от 1500х1500 до 4000х4000 пикселей, в формате JPG, размером не больше 10-12 мегабайт.</p></li><li class="form__hint_item" data-v-4f9e0fef><p class="form__hint text_small" data-v-4f9e0fef>Не должно быть изображений/фотографий популярных людей или персонажей, если на это нет документального подтверждения правообладателя.</p></li><li class="form__hint_item" data-v-4f9e0fef><p class="form__hint text_small" data-v-4f9e0fef>На обложке нельзя использовать нецензурные надписи. Нецензурные жесты должны быть сильно размыты, заблюрены или закрыты. Из надписей допускаются только псевдонимы артистов и название релиза, на 100% совпадающие по языку и написанию с тем, как они указаны в релизе. Несоблюдение этих критериев может задержать выход релиза.</p></li></ul>',2)),e("div",{class:w(["quiz__form_cover_upload",{"drag-over":$.value}]),onClick:v,onDragover:ge(S,["prevent"]),onDragleave:ge(l,["prevent"]),onDrop:ge(_,["prevent"])},[e("div",zl,[z(Ge)]),y[22]||(y[22]=e("div",{class:"quiz__form_cover_upload_content"},[e("div",{class:"quiz__form_cover_upload_button text_small"}," Прикрепите файл или перетащите сюда "),e("p",{class:"quiz__form_cover_upload_hint text_small"}," Формат файла (jpg; png; jpeg). Изображение должно быть хорошего качества. ")],-1))],34),t.coverFile?(u(),c("div",$l,[e("div",Nl,[e("p",Cl,C(F.value),1),e("p",Sl,C(ee(x.value)),1)]),e("div",{class:"quiz__form_single_name_svg",onClick:J},[z(Te)])])):f("",!0),o.coverFile?(u(),c("div",ql,C(o.coverFile),1)):f("",!0)]),e("div",Fl,[y[24]||(y[24]=e("label",{for:"vkLink",class:"form__label button"},[B("Ссылка на вашу страницу в ВК для проверки и подписания договора"),e("span",null,"*")],-1)),y[25]||(y[25]=e("p",{class:"form__hint text_small"},"Если у вас нет ВК, то укажите ссылку на ваш инстаграм. Не указывайте ссылку на ваш паблик – только на личную страницу. Ссылка должна быть кликабельная в формате https://vk.com/... или https://instagram.com/... – не указывайте свои адреса через @ или другие отметки.",-1)),z(A(D),{id:"vkLink",modelValue:t.vkLink,"onUpdate:modelValue":y[11]||(y[11]=b=>t.vkLink=b),type:"text",class:w({error:o.vkLink}),placeholder:"https://vk.com/username или https://instagram.com/username",disabled:h.value,onBlur:g,onInput:y[12]||(y[12]=b=>o.vkLink=""),size:"large"},null,8,["modelValue","class","disabled"]),o.vkLink?(u(),c("div",Vl,C(o.vkLink),1)):f("",!0)]),e("div",xl,[y[26]||(y[26]=e("label",{for:"email",class:"form__label button"},[B("Введите вашу электронную почту"),e("span",null,"*")],-1)),z(A(D),{id:"email",modelValue:t.email,"onUpdate:modelValue":y[13]||(y[13]=b=>t.email=b),type:"email",class:w({error:o.email}),placeholder:"Введите ваш email",disabled:h.value,onBlur:g,onInput:y[14]||(y[14]=b=>o.email=""),size:"large"},null,8,["modelValue","class","disabled"]),o.email?(u(),c("div",Al,C(o.email),1)):f("",!0)])])]),e("div",Tl,[e("div",Ll,[e("button",{class:"form__back button__second button",onClick:be},[e("span",null,[z(pe)]),y[27]||(y[27]=e("span",null,"Назад",-1))]),e("button",{class:"quiz__form_button button__black button",onClick:$e,disabled:!R.value||h.value},[h.value?(u(),c("span",Ml,"Загрузка...")):(u(),c("span",Bl,"Продолжить"))],8,wl)])])])),s.value?(u(),c("div",Ul,[y[31]||(y[31]=le('<h4 class="quiz__important_head" data-v-4f9e0fef>Игнорирование требований приведёт к увеличению сроков отгрузки релиза.</h4><ul class="quiz__important_list" data-v-4f9e0fef><li class="quiz__important_item" data-v-4f9e0fef><p class="quiz__important_description" data-v-4f9e0fef>Обложка должна быть квадратная, размером от 1500х1500 до 4000х4000 пикселей, в формате JPG, размером не больше 10-12 мегабайт.</p></li><li class="quiz__important_item" data-v-4f9e0fef><p class="quiz__important_description" data-v-4f9e0fef>Не должно быть изображений/фотографий популярных людей или персонажей, если на это нет документального подтверждения правообладателя.</p></li><li class="quiz__important_item" data-v-4f9e0fef><p class="quiz__important_description" data-v-4f9e0fef>Не должно быть изображений наготы, запрещённых веществ и символов.</p></li><li class="quiz__important_item" data-v-4f9e0fef><p class="quiz__important_description" data-v-4f9e0fef>На обложке не должно быть никаких надписей, кроме названия релиза и псевдоним(-ов) артиста. Названия на обложке должны на 100% совпадать с названием релиза/псевдонимом, до каждой буквы, запятой и пробела, иначе модерация отклонит такую обложку.</p></li><li class="quiz__important_item" data-v-4f9e0fef><p class="quiz__important_description" data-v-4f9e0fef>Разрешаются обложки без надписей вообще.</p></li><li class="quiz__important_item" data-v-4f9e0fef><p class="quiz__important_description" data-v-4f9e0fef>Также приглашаем изучить рекомендации (носящие обязательный характер) от <a href="https://music.apple.com/" data-v-4f9e0fef>Apple Music</a></p></li></ul>',2)),e("div",Dl,[e("div",Pl,[e("button",{class:"form__back button__second button",onClick:be},[e("span",null,[z(pe)]),y[29]||(y[29]=e("span",null,"Назад",-1))]),e("button",{class:"quiz__form_button button__black button",onClick:Ne,disabled:!R.value||h.value},y[30]||(y[30]=[e("span",null,"принимаю",-1)]),8,El)])])])):f("",!0)],64))}}),Ol=ae(Rl,[["__scopeId","data-v-4f9e0fef"]]),Gl={class:"quiz__form quiz__form_four"},Yl={class:"form__flex"},Ql={class:"form__group"},Il={class:"form__labels"},Jl={class:"form__label"},Kl={class:"form__label"},jl={key:0,class:"error text_very"},Wl={class:"form__group"},Hl={key:0,class:"error text_very"},Xl={class:"form__group"},Zl={key:0,class:"error text_very"},ea={class:"form__group"},ta={key:0,class:"error text_very"},sa={class:"form__group"},la={key:0,class:"error text_very"},aa={class:"form__group"},oa={key:0,class:"error text_very"},ra={class:"form__group"},ia={key:0,class:"error text_very"},na={class:"form__group"},ua={key:0,class:"error text_very"},da={class:"form__group"},ma={key:0,class:"error text_very"},_a={class:"form__group"},ca={key:0,class:"error text_very"},pa={class:"form__group"},fa={key:0,class:"error text_very"},va={key:1,class:"form__group",style:{"margin-top":"10px"}},ga={key:0,class:"error text_very"},ka={class:"form__group"},ba={key:0,class:"error text_very"},ha={class:"form__group"},ya={key:0,class:"error text_very"},za={class:"form__group"},$a={key:0,class:"error text_very"},Na={class:"form__group"},Ca={key:0,class:"error text_very"},Sa={class:"form__group"},qa={key:0,class:"error text_very"},Fa={class:"form__group"},Va={key:0,class:"error text_very"},xa={class:"form__group"},Aa={key:0,class:"error text_very"},Ta={class:"quiz__form_bottom"},La={class:"quiz__form_buttons"},wa=["disabled"],Pe="quiz4_state",Ba=_e({__name:"Quiz4",emits:["go-back","go-next"],setup(oe,{emit:I}){const Q=I,s=ye({userType:"individual",legalAddress:"",inn:"",ogrn:"",accountNumber:"",bankName:"",bankInn:"",bankBik:"",correspondentAccount:"",bankLegalAddress:"",citizenship:"",otherCitizenship:"",lastName:"",firstName:"",middleName:"",passportNumber:"",passportIssuedBy:"",passportIssueDate:"",registrationAddress:""}),t=ye({userType:"",legalAddress:"",inn:"",ogrn:"",accountNumber:"",bankName:"",bankInn:"",bankBik:"",correspondentAccount:"",bankLegalAddress:"",citizenship:"",otherCitizenship:"",lastName:"",firstName:"",middleName:"",passportNumber:"",passportIssuedBy:"",passportIssueDate:"",registrationAddress:""}),o=[{label:"Российская Федерация",value:"RU"},{label:"Другое",value:"other"}],h=O(!1),F=()=>{try{const S={formData:s,showOtherCitizenshipInput:h.value};localStorage.setItem(Pe,JSON.stringify(S))}catch(S){console.error("Error saving state to localStorage:",S)}},x=()=>{try{const S=localStorage.getItem(Pe);if(S){const l=JSON.parse(S);Object.assign(s,l.formData),h.value=l.showOtherCitizenshipInput||!1,s.citizenship==="other"&&!h.value&&(h.value=!0)}}catch(S){console.error("Error loading state from localStorage:",S)}},$=()=>{localStorage.removeItem(Pe)},L=ce(()=>{const S=[];return S.push(s.userType.trim(),s.citizenship.trim(),s.lastName.trim(),s.firstName.trim(),s.passportNumber.trim(),s.passportIssuedBy.trim(),s.passportIssueDate.trim(),s.registrationAddress.trim()),s.citizenship==="other"&&S.push(s.otherCitizenship.trim()),s.userType==="entrepreneur"&&S.push(s.legalAddress.trim(),s.inn.trim(),s.ogrn.trim(),s.accountNumber.trim(),s.bankName.trim(),s.bankInn.trim(),s.bankBik.trim(),s.correspondentAccount.trim(),s.bankLegalAddress.trim()),S.every(Boolean)}),P=S=>/^\d{12}$/.test(S),R=S=>/^\d{15}$/.test(S),T=S=>/^\d{9}$/.test(S),p=S=>/^\d{20}$/.test(S),G=S=>{const l=S.replace(/\s/g,"");return/^\d{10}$/.test(l)},N=S=>{const l=s[S];if(t[S]="",!l.trim())return t[S]="Это поле обязательно для заполнения",!1;switch(S){case"inn":if(!P(l))return t.inn="ИНН должен состоять из 12 цифр",!1;break;case"ogrn":if(!R(l))return t.ogrn="ОГРН должен состоять из 15 цифр",!1;break;case"bankBik":if(!T(l))return t.bankBik="БИК должен состоять из 9 цифр",!1;break;case"accountNumber":if(!p(l))return t.accountNumber="Расчетный счет должен состоять из 20 цифр",!1;break;case"correspondentAccount":if(!p(l))return t.correspondentAccount="Корреспондентский счет должен состоять из 20 цифр",!1;break;case"passportNumber":if(!G(l))return t.passportNumber="Серия и номер паспорта должны состоять из 10 цифр (например: 4510123456)",!1;break;case"passportIssueDate":const _=Me(l),J=Me();if(_.isAfter(J))return t.passportIssueDate="Дата выдачи не может быть в будущем",!1;break;case"lastName":case"firstName":case"otherCitizenship":if(l.trim().length<2)return t[S]="Должно содержать минимум 2 символа",!1;break}return!0},m=()=>{let S=!0;s.userType||(t.userType="Выберите тип лица",S=!1);const l=["citizenship","lastName","firstName","passportNumber","passportIssuedBy","passportIssueDate","registrationAddress"];return s.citizenship==="other"&&l.push("otherCitizenship"),s.userType==="entrepreneur"&&l.push("legalAddress","inn","ogrn","accountNumber","bankName","bankInn","bankBik","correspondentAccount","bankLegalAddress"),l.forEach(_=>{N(_)||(S=!1)}),S},g=()=>{t.userType="",s.userType!=="entrepreneur"&&(s.legalAddress="",s.inn="",s.ogrn="",s.accountNumber="",s.bankName="",s.bankInn="",s.bankBik="",s.correspondentAccount="",s.bankLegalAddress="",t.legalAddress="",t.inn="",t.ogrn="",t.accountNumber="",t.bankName="",t.bankInn="",t.bankBik="",t.correspondentAccount="",t.bankLegalAddress=""),F()},j=()=>{t.citizenship="",t.otherCitizenship="",h.value=s.citizenship==="other",s.citizenship!=="other"&&(s.otherCitizenship=""),N("lastName"),N("firstName"),N("middleName"),F()},k=()=>{Q("go-back")},v=()=>{m()?($(),Q("go-next")):Y.error("Пожалуйста, заполните все обязательные поля правильно")};return me(()=>s,()=>{F()},{deep:!0}),me(()=>s.userType,()=>{s.userType==="entrepreneur"&&(N("legalAddress"),N("inn"),N("ogrn"))}),me(()=>s.citizenship,()=>{s.citizenship&&(N("lastName"),N("firstName"),N("middleName"))}),me(()=>s.otherCitizenship,S=>{S&&s.citizenship==="other"&&N("otherCitizenship")}),ze(()=>{x()}),(S,l)=>(u(),c("div",Gl,[l[78]||(l[78]=e("h4",{class:"quiz__form_head"},"Данные паспорта и реквизиты",-1)),e("div",Yl,[e("div",Ql,[l[55]||(l[55]=e("label",{class:"form__label button"},[B("Выберите тип лица"),e("span",null,"*")],-1)),l[56]||(l[56]=e("p",{class:"form__hint text_small"},"Данные паспорта нужны нам для составления договора. Эти данные остаются конфиденциальными и не пересылаются третьим лицам.",-1)),e("div",Il,[e("label",Jl,[Ke(e("input",{type:"radio","onUpdate:modelValue":l[0]||(l[0]=_=>s.userType=_),value:"individual",class:"form__label_input",onChange:g},null,544),[[je,s.userType]]),l[53]||(l[53]=e("span",{class:"form__label_text"},"Физическое лицо",-1))]),e("label",Kl,[Ke(e("input",{type:"radio","onUpdate:modelValue":l[1]||(l[1]=_=>s.userType=_),value:"entrepreneur",class:"form__label_input",onChange:g},null,544),[[je,s.userType]]),l[54]||(l[54]=e("span",{class:"form__label_text"},"Индивидуальный предприниматель",-1))])]),t.userType?(u(),c("div",jl,C(t.userType),1)):f("",!0)]),s.userType==="entrepreneur"?(u(),c(ue,{key:0},[e("div",Wl,[l[57]||(l[57]=e("label",{for:"legalAddress",class:"form__label button"},[B("Юридический адрес организации"),e("span",null,"*")],-1)),z(A(D),{id:"legalAddress",modelValue:s.legalAddress,"onUpdate:modelValue":l[2]||(l[2]=_=>s.legalAddress=_),type:"text",class:w({error:t.legalAddress}),placeholder:"Введите юридический адрес",onBlur:l[3]||(l[3]=_=>N("legalAddress")),onInput:l[4]||(l[4]=_=>t.legalAddress=""),size:"large"},null,8,["modelValue","class"]),t.legalAddress?(u(),c("div",Hl,C(t.legalAddress),1)):f("",!0)]),e("div",Xl,[l[58]||(l[58]=e("label",{for:"inn",class:"form__label button"},[B("ИНН"),e("span",null,"*")],-1)),z(A(D),{id:"inn",modelValue:s.inn,"onUpdate:modelValue":l[5]||(l[5]=_=>s.inn=_),type:"text",class:w({error:t.inn}),placeholder:"Введите ИНН",maxlength:"12",onBlur:l[6]||(l[6]=_=>N("inn")),onInput:l[7]||(l[7]=_=>t.inn=""),size:"large"},null,8,["modelValue","class"]),t.inn?(u(),c("div",Zl,C(t.inn),1)):f("",!0)]),e("div",ea,[l[59]||(l[59]=e("label",{for:"ogrn",class:"form__label button"},[B("ОГРН"),e("span",null,"*")],-1)),z(A(D),{id:"ogrn",modelValue:s.ogrn,"onUpdate:modelValue":l[8]||(l[8]=_=>s.ogrn=_),type:"text",class:w({error:t.ogrn}),placeholder:"Введите ОГРН",maxlength:"15",onBlur:l[9]||(l[9]=_=>N("ogrn")),onInput:l[10]||(l[10]=_=>t.ogrn=""),size:"large"},null,8,["modelValue","class"]),t.ogrn?(u(),c("div",ta,C(t.ogrn),1)):f("",!0)]),e("div",sa,[l[60]||(l[60]=e("label",{for:"accountNumber",class:"form__label button"},[B("Расчетный счет"),e("span",null,"*")],-1)),z(A(D),{id:"accountNumber",modelValue:s.accountNumber,"onUpdate:modelValue":l[11]||(l[11]=_=>s.accountNumber=_),type:"text",class:w({error:t.accountNumber}),placeholder:"Введите расчетный счет",maxlength:"20",onBlur:l[12]||(l[12]=_=>N("accountNumber")),onInput:l[13]||(l[13]=_=>t.accountNumber=""),size:"large"},null,8,["modelValue","class"]),t.accountNumber?(u(),c("div",la,C(t.accountNumber),1)):f("",!0)]),e("div",aa,[l[61]||(l[61]=e("label",{for:"bankName",class:"form__label button"},[B("Банк"),e("span",null,"*")],-1)),z(A(D),{id:"bankName",modelValue:s.bankName,"onUpdate:modelValue":l[14]||(l[14]=_=>s.bankName=_),type:"text",class:w({error:t.bankName}),placeholder:"Введите полное наименование банка",onBlur:l[15]||(l[15]=_=>N("bankName")),onInput:l[16]||(l[16]=_=>t.bankName=""),size:"large"},null,8,["modelValue","class"]),t.bankName?(u(),c("div",oa,C(t.bankName),1)):f("",!0)]),e("div",ra,[l[62]||(l[62]=e("label",{for:"bankInn",class:"form__label button"},[B("ИНН банка"),e("span",null,"*")],-1)),z(A(D),{id:"bankInn",modelValue:s.bankInn,"onUpdate:modelValue":l[17]||(l[17]=_=>s.bankInn=_),type:"text",class:w({error:t.bankInn}),placeholder:"Введите ИНН банка",maxlength:"10",onBlur:l[18]||(l[18]=_=>N("bankInn")),onInput:l[19]||(l[19]=_=>t.bankInn=""),size:"large"},null,8,["modelValue","class"]),t.bankInn?(u(),c("div",ia,C(t.bankInn),1)):f("",!0)]),e("div",na,[l[63]||(l[63]=e("label",{for:"bankBik",class:"form__label button"},[B("БИК банка"),e("span",null,"*")],-1)),z(A(D),{id:"bankBik",modelValue:s.bankBik,"onUpdate:modelValue":l[20]||(l[20]=_=>s.bankBik=_),type:"text",class:w({error:t.bankBik}),placeholder:"Введите БИК банка",maxlength:"9",onBlur:l[21]||(l[21]=_=>N("bankBik")),onInput:l[22]||(l[22]=_=>t.bankBik=""),size:"large"},null,8,["modelValue","class"]),t.bankBik?(u(),c("div",ua,C(t.bankBik),1)):f("",!0)]),e("div",da,[l[64]||(l[64]=e("label",{for:"correspondentAccount",class:"form__label button"},[B("Корреспондентский счет банка"),e("span",null,"*")],-1)),z(A(D),{id:"correspondentAccount",modelValue:s.correspondentAccount,"onUpdate:modelValue":l[23]||(l[23]=_=>s.correspondentAccount=_),type:"text",class:w({error:t.correspondentAccount}),placeholder:"Введите корреспондентский счет",maxlength:"20",onBlur:l[24]||(l[24]=_=>N("correspondentAccount")),onInput:l[25]||(l[25]=_=>t.correspondentAccount=""),size:"large"},null,8,["modelValue","class"]),t.correspondentAccount?(u(),c("div",ma,C(t.correspondentAccount),1)):f("",!0)]),e("div",_a,[l[65]||(l[65]=e("label",{for:"bankLegalAddress",class:"form__label button"},[B("Юридический адрес банка"),e("span",null,"*")],-1)),z(A(D),{id:"bankLegalAddress",modelValue:s.bankLegalAddress,"onUpdate:modelValue":l[26]||(l[26]=_=>s.bankLegalAddress=_),type:"text",class:w({error:t.bankLegalAddress}),placeholder:"Введите юридический адрес банка",onBlur:l[27]||(l[27]=_=>N("bankLegalAddress")),onInput:l[28]||(l[28]=_=>t.bankLegalAddress=""),size:"large"},null,8,["modelValue","class"]),t.bankLegalAddress?(u(),c("div",ca,C(t.bankLegalAddress),1)):f("",!0)])],64)):f("",!0),e("div",pa,[l[67]||(l[67]=e("label",{for:"citizenship",class:"form__label button"},[B("Гражданство"),e("span",null,"*")],-1)),z(A(Ae),{id:"citizenship",modelValue:s.citizenship,"onUpdate:modelValue":l[29]||(l[29]=_=>s.citizenship=_),placeholder:"Выберите гражданство",class:w({error:t.citizenship}),size:"large",onChange:j},{default:ke(()=>[(u(),c(ue,null,he(o,_=>z(A(xe),{key:_.value,label:_.label,value:_.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","class"]),t.citizenship?(u(),c("div",fa,C(t.citizenship),1)):f("",!0),h.value?(u(),c("div",va,[l[66]||(l[66]=e("label",{for:"otherCitizenship",class:"form__label button"},[B("Укажите ваше гражданство"),e("span",null,"*")],-1)),z(A(D),{id:"otherCitizenship",modelValue:s.otherCitizenship,"onUpdate:modelValue":l[30]||(l[30]=_=>s.otherCitizenship=_),type:"text",class:w({error:t.otherCitizenship}),placeholder:"Введите ваше гражданство",onBlur:l[31]||(l[31]=_=>N("otherCitizenship")),onInput:l[32]||(l[32]=_=>t.otherCitizenship=""),size:"large"},null,8,["modelValue","class"]),t.otherCitizenship?(u(),c("div",ga,C(t.otherCitizenship),1)):f("",!0)])):f("",!0)]),e("div",ka,[l[68]||(l[68]=e("label",{for:"lastName",class:"form__label button"},[B("Фамилия"),e("span",null,"*")],-1)),z(A(D),{id:"lastName",modelValue:s.lastName,"onUpdate:modelValue":l[33]||(l[33]=_=>s.lastName=_),type:"text",class:w({error:t.lastName}),placeholder:"Введите фамилию",onBlur:l[34]||(l[34]=_=>N("lastName")),onInput:l[35]||(l[35]=_=>t.lastName=""),size:"large"},null,8,["modelValue","class"]),t.lastName?(u(),c("div",ba,C(t.lastName),1)):f("",!0)]),e("div",ha,[l[69]||(l[69]=e("label",{for:"firstName",class:"form__label button"},[B("Имя"),e("span",null,"*")],-1)),z(A(D),{id:"firstName",modelValue:s.firstName,"onUpdate:modelValue":l[36]||(l[36]=_=>s.firstName=_),type:"text",class:w({error:t.firstName}),placeholder:"Введите имя",onBlur:l[37]||(l[37]=_=>N("firstName")),onInput:l[38]||(l[38]=_=>t.firstName=""),size:"large"},null,8,["modelValue","class"]),t.firstName?(u(),c("div",ya,C(t.firstName),1)):f("",!0)]),e("div",za,[l[70]||(l[70]=e("label",{for:"middleName",class:"form__label button"},[B("Отчество"),e("span",null,"*")],-1)),z(A(D),{id:"middleName",modelValue:s.middleName,"onUpdate:modelValue":l[39]||(l[39]=_=>s.middleName=_),type:"text",class:w({error:t.middleName}),placeholder:"Введите отчество (при наличии)",onBlur:l[40]||(l[40]=_=>N("middleName")),onInput:l[41]||(l[41]=_=>t.middleName=""),size:"large"},null,8,["modelValue","class"]),t.middleName?(u(),c("div",$a,C(t.middleName),1)):f("",!0)]),e("div",Na,[l[71]||(l[71]=e("label",{for:"passportNumber",class:"form__label button"},[B("Серия и номер паспорта (или удостоверения)"),e("span",null,"*")],-1)),l[72]||(l[72]=e("p",{class:"form__hint text_small"},"Если у вас биометрический паспорт, посмотрите данные в приложении к паспорту",-1)),z(A(D),{id:"passportNumber",modelValue:s.passportNumber,"onUpdate:modelValue":l[42]||(l[42]=_=>s.passportNumber=_),type:"text",class:w({error:t.passportNumber}),placeholder:"Например: 4510 123456",onBlur:l[43]||(l[43]=_=>N("passportNumber")),onInput:l[44]||(l[44]=_=>t.passportNumber=""),size:"large"},null,8,["modelValue","class"]),t.passportNumber?(u(),c("div",Ca,C(t.passportNumber),1)):f("",!0)]),e("div",Sa,[l[73]||(l[73]=e("label",{for:"passportIssuedBy",class:"form__label button"},[B("Кем выдан"),e("span",null,"*")],-1)),z(A(D),{id:"passportIssuedBy",modelValue:s.passportIssuedBy,"onUpdate:modelValue":l[45]||(l[45]=_=>s.passportIssuedBy=_),type:"text",class:w({error:t.passportIssuedBy}),placeholder:"Например: ОУФМС России по г. Москве",onBlur:l[46]||(l[46]=_=>N("passportIssuedBy")),onInput:l[47]||(l[47]=_=>t.passportIssuedBy=""),size:"large"},null,8,["modelValue","class"]),t.passportIssuedBy?(u(),c("div",qa,C(t.passportIssuedBy),1)):f("",!0)]),e("div",Fa,[l[74]||(l[74]=e("label",{for:"passportIssueDate",class:"form__label button"},[B("Дата выдачи"),e("span",null,"*")],-1)),z(A(et),{id:"passportIssueDate",modelValue:s.passportIssueDate,"onUpdate:modelValue":l[48]||(l[48]=_=>s.passportIssueDate=_),type:"date",placeholder:"Выберите дату",format:"DD.MM.YYYY","value-format":"YYYY-MM-DD",class:w({error:t.passportIssueDate}),size:"large",style:{width:"100%"},onChange:l[49]||(l[49]=_=>t.passportIssueDate="")},null,8,["modelValue","class"]),t.passportIssueDate?(u(),c("div",Va,C(t.passportIssueDate),1)):f("",!0)]),e("div",xa,[l[75]||(l[75]=e("label",{for:"registrationAddress",class:"form__label button"},[B("Адрес регистрации / вашей прописки полностью, как в документе"),e("span",null,"*")],-1)),z(A(D),{id:"registrationAddress",modelValue:s.registrationAddress,"onUpdate:modelValue":l[50]||(l[50]=_=>s.registrationAddress=_),type:"text",class:w({error:t.registrationAddress}),placeholder:"Введите полный адрес регистрации",onBlur:l[51]||(l[51]=_=>N("registrationAddress")),onInput:l[52]||(l[52]=_=>t.registrationAddress=""),size:"large"},null,8,["modelValue","class"]),t.registrationAddress?(u(),c("div",Aa,C(t.registrationAddress),1)):f("",!0)])]),e("div",Ta,[e("div",La,[e("button",{class:"form__back button__second button",onClick:k},[e("span",null,[z(pe)]),l[76]||(l[76]=e("span",null,"Назад",-1))]),e("button",{class:"quiz__form_button button__black button",onClick:v,disabled:!L.value},l[77]||(l[77]=[e("span",null,"Продолжить",-1)]),8,wa)])])]))}}),Ma=ae(Ba,[["__scopeId","data-v-b7ebf52e"]]),Ua={class:"quiz__form quiz__form_five"},Da={class:"quiz__form_single"},Pa={class:"form__flex"},Ea={class:"form__group"},Ra={key:0,class:"error text_very"},Oa={class:"form__group"},Ga={key:0,class:"error text_very"},Ya={class:"form__group"},Qa={class:"quiz__form_cover_upload_icon"},Ia={key:0,class:"quiz__form_single_name"},Ja={class:"quiz__form_single_name_left"},Ka={class:"quiz__form_single_name_text"},ja={class:"quiz__form_single_name_size text_small"},Wa={key:1,class:"error text_very quiz__form_single_error"},Ha={class:"form__group"},Xa={key:0,class:"error text_very"},Za={key:1,class:"form__group_inner"},eo={key:0,class:"error text_very"},to={class:"form__group"},so={class:"quiz__form_cover_upload_icon"},lo={key:0,class:"quiz__form_single_name"},ao={class:"quiz__form_single_name_left"},oo={class:"quiz__form_single_name_text"},ro={class:"quiz__form_single_name_size text_small"},io={key:1,class:"error text_very quiz__form_single_error"},no={key:2,class:"error text_very quiz__form_single_error"},uo={class:"form__group"},mo={key:0,class:"error text_very"},_o={key:1,class:"error text_very"},co={key:2,class:"error text_very"},po={key:3,class:"error text_very"},fo={class:"form__group"},vo={key:0,class:"error text_very"},go={class:"quiz__form_bottom"},ko={class:"quiz__form_buttons"},bo=["disabled"],Ee="quiz5_state",ho=_e({__name:"Quiz5",emits:["go-back","go-next"],setup(oe,{emit:I}){const Q=I,s=O({genre:"",tiktokStartSeconds:"",appleMusicTextFile:null,hasDrugsMention:"",drugsTracks:"",karaokeFile:null,appleMusicLinks:"",spotifyLinks:"",vkLinks:"",yandexMusicLinks:"",socialLinks:""}),t=O({genre:"",tiktokStartSeconds:"",appleMusicTextFile:"",hasDrugsMention:"",drugsTracks:"",karaokeFile:"",appleMusicLinks:"",spotifyLinks:"",vkLinks:"",yandexMusicLinks:"",socialLinks:"",fileConsistency:""}),o=O(!1),h=O(!1),F=O(null),x=O(null),$=[{value:"yes",label:"Да"},{value:"no",label:"Нет"}],L=O(""),P=O(0),R=O(""),T=O(0),p=()=>{try{const b={formData:{...s.value,appleMusicTextFile:s.value.appleMusicTextFile?{name:s.value.appleMusicTextFile.name,size:s.value.appleMusicTextFile.size,type:s.value.appleMusicTextFile.type}:null,karaokeFile:s.value.karaokeFile?{name:s.value.karaokeFile.name,size:s.value.karaokeFile.size,type:s.value.karaokeFile.type}:null},appleMusicFileName:L.value,appleMusicFileSize:P.value,karaokeFileName:R.value,karaokeFileSize:T.value};localStorage.setItem(Ee,JSON.stringify(b))}catch(b){console.error("Error saving state to localStorage:",b)}},G=()=>{try{const b=localStorage.getItem(Ee);if(b){const n=JSON.parse(b),{appleMusicTextFile:V,karaokeFile:X,...H}=n.formData;s.value={...H,appleMusicTextFile:null,karaokeFile:null},L.value=n.appleMusicFileName||"",P.value=n.appleMusicFileSize||0,R.value=n.karaokeFileName||"",T.value=n.karaokeFileSize||0}}catch(b){console.error("Error loading state from localStorage:",b)}},N=()=>{localStorage.removeItem(Ee)},m=ce(()=>{if(!s.value.genre.trim()||s.value.genre.length>100||!s.value.hasDrugsMention||s.value.hasDrugsMention==="yes"&&(!s.value.drugsTracks.trim()||!s.value.drugsTracks.split(",").map(ie=>ie.trim()).every(ie=>{const se=Number(ie);return!isNaN(se)&&se>0&&se<=100&&Number.isInteger(se)}))||!s.value.socialLinks.trim())return!1;const b=s.value.socialLinks.split(",").map(te=>te.trim()),n=/^(https?:\/\/)?([\w-]+\.)+[\w-]+(\/[\w-./?%&=]*)?$/;if(b.some(te=>!n.test(te))||s.value.tiktokStartSeconds.trim()&&!s.value.tiktokStartSeconds.split(",").map(ie=>ie.trim()).every(ie=>{const se=Number(ie);return!isNaN(se)&&se>=0&&se<=5999&&Number.isInteger(se)}))return!1;if(s.value.appleMusicTextFile){const te=[".docx"],re=s.value.appleMusicTextFile.name.toLowerCase();if(!te.some(se=>re.endsWith(se))||s.value.appleMusicTextFile.size>10*1024*1024)return!1}if(s.value.karaokeFile){const te=[".ttml"],re=s.value.karaokeFile.name.toLowerCase();if(!te.some(se=>re.endsWith(se))||s.value.karaokeFile.size>10*1024*1024)return!1}const X=!!s.value.appleMusicTextFile,H=!!s.value.karaokeFile;if(X&&!H||!X&&H)return!1;const K=te=>{if(te.trim()){const re=te.split(",").map(Ce=>Ce.trim()),ie=/^(https?:\/\/)?([\w-]+\.)+[\w-]+(\/[\w-./?%&=]*)?$/;return!re.some(Ce=>Ce.toLowerCase()==="нужны новые карточки"?!1:!ie.test(Ce))}return!0};return!(!K(s.value.appleMusicLinks)||!K(s.value.spotifyLinks)||!K(s.value.vkLinks)||!K(s.value.yandexMusicLinks))}),g=b=>{switch(b){case"genre":s.value.genre.trim()?s.value.genre.length>100?t.value.genre="Жанр не должен превышать 100 символов":t.value.genre="":t.value.genre="Укажите жанр";break;case"tiktokStartSeconds":s.value.tiktokStartSeconds.trim()?s.value.tiktokStartSeconds.split(",").map(H=>H.trim()).every(H=>{const K=Number(H);return!isNaN(K)&&K>=0&&K<=5999&&Number.isInteger(K)})?t.value.tiktokStartSeconds="":t.value.tiktokStartSeconds="Укажите корректные секунды (целые числа от 0 до 5999, разделенные запятыми)":t.value.tiktokStartSeconds="";break;case"hasDrugsMention":s.value.hasDrugsMention?t.value.hasDrugsMention="":t.value.hasDrugsMention="Выберите ответ";break;case"drugsTracks":s.value.hasDrugsMention==="yes"?s.value.drugsTracks.trim()?s.value.drugsTracks.split(",").map(H=>H.trim()).every(H=>{const K=Number(H);return!isNaN(K)&&K>0&&K<=100&&Number.isInteger(K)})?t.value.drugsTracks="":t.value.drugsTracks="Укажите корректные номера треков (целые числа от 1 до 100, разделенные запятыми)":t.value.drugsTracks="Укажите номера треков с упоминанием наркотических средств":t.value.drugsTracks="";break;case"appleMusicLinks":case"spotifyLinks":case"vkLinks":case"yandexMusicLinks":const n=s.value[b];if(n.trim()){const V=n.split(",").map(K=>K.trim()),X=/^(https?:\/\/)?([\w-]+\.)+[\w-]+(\/[\w-./?%&=]*)?$/;V.some(K=>K.toLowerCase()==="нужны новые карточки"?!1:!X.test(K))?t.value[b]='Укажите корректные ссылки или "Нужны новые карточки"':t.value[b]=""}else t.value[b]="";break;case"socialLinks":if(!s.value.socialLinks.trim())t.value.socialLinks="Укажите ссылки на соцсети";else{const V=s.value.socialLinks.split(",").map(K=>K.trim()),X=/^(https?:\/\/)?([\w-]+\.)+[\w-]+(\/[\w-./?%&=]*)?$/;V.some(K=>!X.test(K))?t.value.socialLinks="Укажите корректные ссылки на соцсети":t.value.socialLinks=""}break}j(),p()},j=()=>{const b=!!s.value.appleMusicTextFile,n=!!s.value.karaokeFile;b&&!n||!b&&n?t.value.fileConsistency="Для добавления текста трека необходимо прикрепить оба файла: docx и ttml":t.value.fileConsistency=""},k=()=>{if(g("genre"),g("tiktokStartSeconds"),g("hasDrugsMention"),g("drugsTracks"),g("appleMusicLinks"),g("spotifyLinks"),g("vkLinks"),g("yandexMusicLinks"),g("socialLinks"),s.value.appleMusicTextFile){const n=[".docx"],V=s.value.appleMusicTextFile.name.toLowerCase();n.some(H=>V.endsWith(H))?s.value.appleMusicTextFile.size>10*1024*1024?t.value.appleMusicTextFile="Размер файла не должен превышать 10 МБ":t.value.appleMusicTextFile="":t.value.appleMusicTextFile="Неверный формат файла. Разрешены только файлы .docx"}else t.value.appleMusicTextFile="";if(s.value.karaokeFile){const n=[".ttml"],V=s.value.karaokeFile.name.toLowerCase();n.some(H=>V.endsWith(H))?s.value.karaokeFile.size>10*1024*1024?t.value.karaokeFile="Размер файла не должен превышать 10 МБ":t.value.karaokeFile="":t.value.karaokeFile="Неверный формат файла. Разрешены только файлы .ttml"}else t.value.karaokeFile="";return j(),!Object.values(t.value).some(n=>n!=="")},v=()=>{Q("go-back")},S=()=>{k()&&(N(),Q("go-next",s.value))},l=()=>{var b;(b=F.value)==null||b.click()},_=()=>{var b;(b=x.value)==null||b.click()},J=b=>{const n=b.target;if(n.files&&n.files[0]){const V=n.files[0];s.value.appleMusicTextFile=V,L.value=V.name,P.value=V.size,g("appleMusicTextFile"),j(),p()}},ee=b=>{const n=b.target;if(n.files&&n.files[0]){const V=n.files[0];s.value.karaokeFile=V,R.value=V.name,T.value=V.size,g("karaokeFile"),j(),p()}},fe=b=>{b.preventDefault();const n=b.currentTarget;n.classList.contains("apple-music-upload")?o.value=!0:n.classList.contains("karaoke-upload")&&(h.value=!0)},be=b=>{b.preventDefault();const n=b.currentTarget;n.classList.contains("apple-music-upload")?o.value=!1:n.classList.contains("karaoke-upload")&&(h.value=!1)},$e=b=>{var n;if(b.preventDefault(),(n=b.dataTransfer)!=null&&n.files.length){const V=b.dataTransfer.files[0],X=b.currentTarget;if(X.classList.contains("apple-music-upload")){o.value=!1;const H=[".docx"],K=V.name.toLowerCase();if(!H.some(re=>K.endsWith(re))){t.value.appleMusicTextFile="Неверный формат файла. Разрешены только файлы .docx";return}if(V.size>10*1024*1024){t.value.appleMusicTextFile="Размер файла не должен превышать 10 МБ";return}s.value.appleMusicTextFile=V,L.value=V.name,P.value=V.size,t.value.appleMusicTextFile=""}else if(X.classList.contains("karaoke-upload")){h.value=!1;const H=[".ttml"],K=V.name.toLowerCase();if(!H.some(re=>K.endsWith(re))){t.value.karaokeFile="Неверный формат файла. Разрешены только файлы .ttml";return}if(V.size>10*1024*1024){t.value.karaokeFile="Размер файла не должен превышать 10 МБ";return}s.value.karaokeFile=V,R.value=V.name,T.value=V.size,t.value.karaokeFile=""}j(),p()}},Ne=()=>{s.value.appleMusicTextFile=null,L.value="",P.value=0,F.value&&(F.value.value=""),t.value.appleMusicTextFile="",j(),p()},q=()=>{s.value.karaokeFile=null,R.value="",T.value=0,x.value&&(x.value.value=""),t.value.karaokeFile="",j(),p()},y=b=>{if(b===0)return"0 Б";const n=1024,V=["Б","КБ","МБ","ГБ"],X=Math.floor(Math.log(b)/Math.log(n));return parseFloat((b/Math.pow(n,X)).toFixed(2))+" "+V[X]};return me(()=>s.value,()=>{p()},{deep:!0}),me(()=>s.value.hasDrugsMention,b=>{b!=="yes"&&(s.value.drugsTracks="",t.value.drugsTracks=""),g("hasDrugsMention"),g("drugsTracks"),p()}),ze(()=>{G()}),(b,n)=>(u(),c("div",Ua,[n[40]||(n[40]=e("h4",{class:"quiz__form_head"},"жанр и текст",-1)),e("div",Da,[e("div",Pa,[e("div",Ea,[n[26]||(n[26]=e("label",{for:"genre",class:"form__label button"},[B("Какой жанр указать?"),e("span",null,"*")],-1)),z(A(D),{id:"genre",modelValue:s.value.genre,"onUpdate:modelValue":n[0]||(n[0]=V=>s.value.genre=V),type:"text",class:w({error:t.value.genre}),placeholder:"Например: Поп, Хип-хоп, Рок",onBlur:n[1]||(n[1]=V=>g("genre")),onInput:n[2]||(n[2]=V=>t.value.genre=""),size:"large"},null,8,["modelValue","class"]),t.value.genre?(u(),c("div",Ra,C(t.value.genre),1)):f("",!0)]),e("div",Oa,[n[27]||(n[27]=le('<label for="tiktokStartSeconds" class="form__label button" data-v-5965cf26>С какой секунды воспроизводить трек в Tik Tok?</label><ul class="form__hint_list" data-v-5965cf26><li class="form__hint_item" data-v-5965cf26><p class="form__hint text_small" data-v-5965cf26>Укажите секунды через запятую в порядке загруженных ранее треков.</p></li><li class="form__hint_item" data-v-5965cf26><p class="form__hint text_small" data-v-5965cf26>Если вам нужно начать отрывок, например, с 1:24 (одной минуты и двадцать червёртой секунды), то укажите 84. Это число появилось из логики, что в 1 минуте 60 секунд, следовательно, вам нужна 60+24=84 секунда.</p></li></ul>',2)),z(A(D),{id:"tiktokStartSeconds",modelValue:s.value.tiktokStartSeconds,"onUpdate:modelValue":n[3]||(n[3]=V=>s.value.tiktokStartSeconds=V),type:"text",class:w({error:t.value.tiktokStartSeconds}),placeholder:"Например: 0, 30, 84, 120",onBlur:n[4]||(n[4]=V=>g("tiktokStartSeconds")),onInput:n[5]||(n[5]=V=>t.value.tiktokStartSeconds=""),size:"large"},null,8,["modelValue","class"]),t.value.tiktokStartSeconds?(u(),c("div",Ga,C(t.value.tiktokStartSeconds),1)):f("",!0)]),e("div",Ya,[n[29]||(n[29]=le('<label class="form__label button" data-v-5965cf26>Текст для <a href="https://music.apple.com/" data-v-5965cf26>Apple Music</a></label><ul class="form__hint_list" data-v-5965cf26><li class="form__hint_item" data-v-5965cf26><p class="form__hint text_small" data-v-5965cf26>Куплеты и припевы должны быть разделены пробелом, каждая строчка с большой буквы, в конце строчек без знаков препинания. В тексте должно быть только то, что произносится в песне.</p></li><li class="form__hint_item" data-v-5965cf26><p class="form__hint text_small" data-v-5965cf26>Пожалуйста, обратите внимание на текст. Припевы и куплеты отделите пробелом, в конце строчек не ставьте знаки препинания, мат не нужно сокращать или цензурить ***.</p></li><li class="form__hint_item" data-v-5965cf26><p class="form__hint text_small" data-v-5965cf26>В тексте нужно полностью прописать все, что проговаривается, включая интро и аутро.</p></li><li class="form__hint_item" data-v-5965cf26><p class="form__hint text_small" data-v-5965cf26>Бэки, эдлибы можно не указывать</p></li><li class="form__hint_item" data-v-5965cf26><p class="form__hint text_small" data-v-5965cf26>ВАЖНО: Если вы хотите добавить текст трека - ОБЯЗАТЕЛЬНО нужно прикреплять и файл docx, и караоке-файл, иначе текст не будет добавлен на площадки. При добавлении только одного из файлов вы не будете допущены на следующую страницу загрузочной формы. Если вы не хотите добавлять текст, то оставьте оба поля ПУСТЫМИ.</p></li></ul>',2)),e("input",{type:"file",ref_key:"appleMusicTextFileRef",ref:F,onChange:J,accept:".docx",style:{display:"none"}},null,544),e("div",{class:w(["quiz__form_cover_upload apple-music-upload",{"drag-over":o.value}]),onClick:l,onDragover:ge(fe,["prevent"]),onDragleave:ge(be,["prevent"]),onDrop:ge($e,["prevent"])},[e("div",Qa,[z(Ge)]),n[28]||(n[28]=e("div",{class:"quiz__form_cover_upload_content"},[e("div",{class:"quiz__form_cover_upload_button text_small"}," Прикрепите файл или перетащите сюда "),e("p",{class:"quiz__form_cover_upload_hint text_small"}," Формат файла (docx) ")],-1))],34),s.value.appleMusicTextFile?(u(),c("div",Ia,[e("div",Ja,[e("p",Ka,C(L.value),1),e("p",ja,C(y(P.value)),1)]),e("div",{class:"quiz__form_single_name_svg",onClick:Ne},[z(Te)])])):f("",!0),t.value.appleMusicTextFile?(u(),c("div",Wa,C(t.value.appleMusicTextFile),1)):f("",!0)]),e("div",Ha,[n[31]||(n[31]=e("label",{class:"form__label button"},[B("ЕСТЬ ЛИ У ВАС В РЕЛИЗЕ УПОМИНАНИЕ НАРКОТИЧЕСКИХ СРЕДСТВ?"),e("span",null,"*")],-1)),n[32]||(n[32]=e("p",{class:"form__hint text_small"},"В тексте или названии любого из треков. Независимо от контекста: любое упоминание веществ, способы употребления или производства, в том числе слегновые названия. Алкоголь и сигареты не считаются.",-1)),z(A(Ae),{modelValue:s.value.hasDrugsMention,"onUpdate:modelValue":n[6]||(n[6]=V=>s.value.hasDrugsMention=V),placeholder:"Выберите ответ",class:w({error:t.value.hasDrugsMention}),size:"large",onChange:n[7]||(n[7]=V=>g("hasDrugsMention"))},{default:ke(()=>[(u(),c(ue,null,he($,V=>z(A(xe),{key:V.value,label:V.label,value:V.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","class"]),t.value.hasDrugsMention?(u(),c("div",Xa,C(t.value.hasDrugsMention),1)):f("",!0),s.value.hasDrugsMention==="yes"?(u(),c("div",Za,[n[30]||(n[30]=e("p",{class:"form__hint text_small"},"Укажите номера треков*",-1)),z(A(D),{modelValue:s.value.drugsTracks,"onUpdate:modelValue":n[8]||(n[8]=V=>s.value.drugsTracks=V),type:"text",placeholder:"Например: 1, 3, 5",class:w({error:t.value.drugsTracks}),onBlur:n[9]||(n[9]=V=>g("drugsTracks")),onInput:n[10]||(n[10]=V=>t.value.drugsTracks=""),size:"large"},null,8,["modelValue","class"]),t.value.drugsTracks?(u(),c("div",eo,C(t.value.drugsTracks),1)):f("",!0)])):f("",!0)]),e("div",to,[n[34]||(n[34]=le('<label class="form__label button" data-v-5965cf26>Караоке текст для <a href="https://music.apple.com/" data-v-5965cf26>Apple Music</a> и <a href="https://www.spotify.com/i" data-v-5965cf26>Spotify</a>, <a href="https://music.yandex.ru/" data-v-5965cf26>Yandex Music</a>, <a href="https://music.vk.com/" data-v-5965cf26>VK</a></label><ul class="form__hint_list" data-v-5965cf26><li class="form__hint_item" data-v-5965cf26><p class="form__hint text_small" data-v-5965cf26>Чтобы сделать караоке файл, зайдите на наш сайт, следуйте инструкции на сайте и создайте необходимые файлы. Обязательно подпишите их по названию треков, к которым они относятся.</p></li><li class="form__hint_item" data-v-5965cf26><p class="form__hint text_small" data-v-5965cf26>При создании караоке файлов важно, чтобы изначальный текст был верно отредактирован, как указано в предыдущем пункте.</p></li><li class="form__hint_item" data-v-5965cf26><p class="form__hint text_small" data-v-5965cf26>Если вы сделаете караоке файл из текста, где есть лишние слова (напр. &quot;Припев&quot;, &quot;Куплет&quot; и проч.), то караоке файл будет отклонён площадками и это может задержать выход релиза.</p></li></ul>',2)),e("input",{type:"file",ref_key:"karaokeFileRef",ref:x,onChange:ee,accept:".ttml",style:{display:"none"}},null,544),e("div",{class:w(["quiz__form_cover_upload karaoke-upload",{"drag-over":h.value}]),onClick:_,onDragover:ge(fe,["prevent"]),onDragleave:ge(be,["prevent"]),onDrop:ge($e,["prevent"])},[e("div",so,[z(Ge)]),n[33]||(n[33]=e("div",{class:"quiz__form_cover_upload_content"},[e("div",{class:"quiz__form_cover_upload_button text_small"}," Прикрепите файл или перетащите сюда "),e("p",{class:"quiz__form_cover_upload_hint text_small"}," Формат файла (ttml) ")],-1))],34),s.value.karaokeFile?(u(),c("div",lo,[e("div",ao,[e("p",oo,C(R.value),1),e("p",ro,C(y(T.value)),1)]),e("div",{class:"quiz__form_single_name_svg",onClick:q},[z(Te)])])):f("",!0),t.value.karaokeFile?(u(),c("div",io,C(t.value.karaokeFile),1)):f("",!0),t.value.fileConsistency?(u(),c("div",no,C(t.value.fileConsistency),1)):f("",!0)]),e("div",uo,[n[35]||(n[35]=le('<label class="form__label button" data-v-5965cf26>ССЫЛКИ НА КАРТОЧКИ АРТИСТОВ</label><ul class="form__hint_list" data-v-5965cf26><li class="form__hint_item" data-v-5965cf26><p class="form__hint text_small" data-v-5965cf26>Укажите через запятую ссылки на карточки в <a href="https://music.apple.com/" data-v-5965cf26>Apple Music</a> всех артистов, указанных в загружаемом релизе. Если карточек нет, укажите &quot;Нужны новые карточки&quot;.</p></li><li class="form__hint_item" data-v-5965cf26><p class="form__hint text_small" data-v-5965cf26>Указание карточек повышает шансы, что релиз попадёт по адресу, но НЕ ГАРАНТИРУЕТ этого. Распределение по карточкам совершают алгоритмы, поэтому есть вероятность ошибок. В случае ошибки, исправить её можно через нашу поддержку.</p></li></ul>',2)),z(A(D),{modelValue:s.value.appleMusicLinks,"onUpdate:modelValue":n[11]||(n[11]=V=>s.value.appleMusicLinks=V),type:"text",class:w({error:t.value.appleMusicLinks}),placeholder:"Ссылки в Apple Music через запятую",onBlur:n[12]||(n[12]=V=>g("appleMusicLinks")),onInput:n[13]||(n[13]=V=>t.value.appleMusicLinks=""),size:"large"},null,8,["modelValue","class"]),z(A(D),{modelValue:s.value.spotifyLinks,"onUpdate:modelValue":n[14]||(n[14]=V=>s.value.spotifyLinks=V),type:"text",class:w({error:t.value.spotifyLinks}),placeholder:"Ссылки в Spotify через запятую",onBlur:n[15]||(n[15]=V=>g("spotifyLinks")),onInput:n[16]||(n[16]=V=>t.value.spotifyLinks=""),size:"large"},null,8,["modelValue","class"]),z(A(D),{modelValue:s.value.vkLinks,"onUpdate:modelValue":n[17]||(n[17]=V=>s.value.vkLinks=V),type:"text",class:w({error:t.value.vkLinks}),placeholder:"Ссылки в VK через запятую",onBlur:n[18]||(n[18]=V=>g("vkLinks")),onInput:n[19]||(n[19]=V=>t.value.vkLinks=""),size:"large"},null,8,["modelValue","class"]),z(A(D),{modelValue:s.value.yandexMusicLinks,"onUpdate:modelValue":n[20]||(n[20]=V=>s.value.yandexMusicLinks=V),type:"text",class:w({error:t.value.yandexMusicLinks}),placeholder:"Ссылки в Yandex Music через запятую",onBlur:n[21]||(n[21]=V=>g("yandexMusicLinks")),onInput:n[22]||(n[22]=V=>t.value.yandexMusicLinks=""),size:"large"},null,8,["modelValue","class"]),t.value.appleMusicLinks?(u(),c("div",mo,C(t.value.appleMusicLinks),1)):f("",!0),t.value.spotifyLinks?(u(),c("div",_o,C(t.value.spotifyLinks),1)):f("",!0),t.value.vkLinks?(u(),c("div",co,C(t.value.vkLinks),1)):f("",!0),t.value.yandexMusicLinks?(u(),c("div",po,C(t.value.yandexMusicLinks),1)):f("",!0)]),e("div",fo,[n[36]||(n[36]=le('<label for="socialLinks" class="form__label button" data-v-5965cf26>ССЫЛКИ НА СОЦИАЛЬНЫЕ СЕТИ АРТИСТОВ<span data-v-5965cf26>*</span></label><ul class="form__hint_list" data-v-5965cf26><li class="form__hint_item" data-v-5965cf26><p class="form__hint text_small" data-v-5965cf26>Паблик в VK, страница в Instagram, профиль в TikTok, YouTube и проч.</p></li><li class="form__hint_item" data-v-5965cf26><p class="form__hint text_small" data-v-5965cf26>Модерация может запросить ссылки на соц. сети артиста. Важно, чтобы название паблика/аккаунта совпадало с псевдонимом артиста. Верификация не обязательна. Непредоставление этой информации может задержать выход релиза.</p></li></ul>',2)),z(A(D),{id:"socialLinks",modelValue:s.value.socialLinks,"onUpdate:modelValue":n[23]||(n[23]=V=>s.value.socialLinks=V),type:"text",class:w({error:t.value.socialLinks}),placeholder:"Ссылки на соцсети через запятую",onBlur:n[24]||(n[24]=V=>g("socialLinks")),onInput:n[25]||(n[25]=V=>t.value.socialLinks=""),size:"large"},null,8,["modelValue","class"]),n[37]||(n[37]=e("p",{class:"form__hint text_small"},"*деятельность компании Meta Platforms Inc., которой принадлежит Инстаграм / Фейсбук, запрещена на территории РФ в части реализации данной (-ых) социальной (-ых) сети (-ей) на основании осуществления ею экстремистской деятельности",-1)),t.value.socialLinks?(u(),c("div",vo,C(t.value.socialLinks),1)):f("",!0)])])]),e("div",go,[e("div",ko,[e("button",{class:"form__back button__second button",onClick:v},[e("span",null,[z(pe)]),n[38]||(n[38]=e("span",null,"Назад",-1))]),e("button",{class:"quiz__form_button button__black button",onClick:S,disabled:!m.value},n[39]||(n[39]=[e("span",null,"Продолжить",-1)]),8,bo)])])]))}}),yo=ae(ho,[["__scopeId","data-v-5965cf26"]]),zo={class:"quiz__form quiz__form_six"},$o={class:"form__flex"},No={class:"form__group"},Co={key:0,class:"error text_very"},So={key:1,class:"form__group_inner"},qo={key:0,class:"error text_very"},Fo={class:"form__group"},Vo={class:"form__group_inner"},xo={key:0,class:"error text_very"},Ao={class:"form__group"},To={class:"form__group"},Lo={class:"form__group"},wo={key:0,class:"error text_very"},Bo={class:"form__group"},Mo={class:"form__group"},Uo={class:"form__checkbox_group"},Do={class:"form__group"},Po={class:"quiz__form_sum"},Eo={class:"quiz__form_total"},Ro={class:"form__group"},Oo={class:"form__checkbox_group"},Go={key:0,class:"error text_very"},Yo={class:"quiz__form_bottom"},Qo={class:"quiz__form_buttons"},Io=["disabled"],Xe="quiz6_state",Jo=_e({__name:"Quiz6",emits:["go-back","go-next"],setup(oe,{emit:I}){const Q=I,s=ye({platforms:[],otherPlatform:"",rightsInfo:"",rightsContractLink:"",additionalComments:"",promoPlan:"",bandlinkUrl:"",promoCode:"",usePartnerBonuses:!1,confirmNoRightsViolation:!1}),t=ye({platforms:"",otherPlatform:"",rightsInfo:"",rightsContractLink:"",additionalComments:"",promoPlan:"",bandlinkUrl:"",promoCode:"",usePartnerBonuses:"",confirmNoRightsViolation:""}),o=[{label:"Социальные сети (VK, Instagram, Telegram)",value:"social"},{label:"Рекомендация друзей",value:"friends"},{label:"Поиск в интернете",value:"search"},{label:"YouTube",value:"youtube"},{label:"Музыкальные форумы",value:"forums"},{label:"Ранее пользовались нашими услугами",value:"previous"},{label:"Другое",value:"other"}],h=O(2590),F=()=>{try{const N={formData:s};localStorage.setItem(Xe,JSON.stringify(N))}catch(N){console.error("Error saving state to localStorage:",N)}},x=()=>{try{const N=localStorage.getItem(Xe);if(N){const m=JSON.parse(N);Object.assign(s,m.formData)}}catch(N){console.error("Error loading state from localStorage:",N)}},$=N=>{if(!N.trim())return!0;try{return new URL(N),!0}catch{return!1}},L=N=>{let m="";switch(N){case"platforms":s.platforms.length===0&&(m="Выберите хотя бы один вариант");break;case"otherPlatform":s.platforms.includes("other")&&!s.otherPlatform.trim()?m="Укажите другие источники":s.otherPlatform.trim().length>0&&s.otherPlatform.trim().length<2&&(m="Минимум 2 символа");break;case"rightsContractLink":s.rightsContractLink.trim()&&!$(s.rightsContractLink)&&(m="Введите корректную ссылку (начинается с https://)");break;case"bandlinkUrl":s.bandlinkUrl.trim()&&!$(s.bandlinkUrl)?m="Введите корректную ссылку на Band.link":s.bandlinkUrl.trim()&&!s.bandlinkUrl.includes("band.link")&&(m="Ссылка должна вести на Band.link");break;case"confirmNoRightsViolation":s.confirmNoRightsViolation||(m="Необходимо подтвердить отсутствие нарушений прав");break}return t[N]=m,F(),!m},P=N=>{let m=!0;return N==="rightsContractLink"?s.rightsContractLink.trim()?$(s.rightsContractLink)?(t.rightsContractLink="",m=!0):(t.rightsContractLink="Введите корректную ссылку (начинается с https://)",m=!1):(t.rightsContractLink="",m=!0):N==="bandlinkUrl"&&(s.bandlinkUrl.trim()?$(s.bandlinkUrl)?s.bandlinkUrl.includes("band.link")?(t.bandlinkUrl="",m=!0):(t.bandlinkUrl="Ссылка должна вести на Band.link",m=!1):(t.bandlinkUrl="Введите корректную ссылку (начинается с https://)",m=!1):(t.bandlinkUrl="",m=!0)),F(),m},R=()=>{let N=!0;return["platforms","confirmNoRightsViolation"].forEach(g=>{L(g)||(N=!1)}),s.platforms.includes("other")&&(L("otherPlatform")||(N=!1)),s.rightsContractLink.trim()&&(P("rightsContractLink")||(N=!1)),s.bandlinkUrl.trim()&&(P("bandlinkUrl")||(N=!1)),F(),N},T=ce(()=>{const N=s.platforms.length>0&&s.confirmNoRightsViolation;let m=!0;s.platforms.includes("other")&&(m=s.otherPlatform.trim().length>=2);let g=!0;s.rightsContractLink.trim()&&(g=$(s.rightsContractLink));let j=!0;return s.bandlinkUrl.trim()&&(j=$(s.bandlinkUrl)&&s.bandlinkUrl.includes("band.link")),N&&m&&g&&j}),p=()=>{Q("go-back")},G=()=>{R()?(console.log("Данные формы сохранены:",s),Q("go-next")):Y.warning("Пожалуйста, заполните все обязательные поля корректно")};return me(()=>s,()=>{F()},{deep:!0}),me(()=>s.platforms,N=>{N.includes("other")||(s.otherPlatform="",t.otherPlatform=""),F()}),ze(()=>{x()}),(N,m)=>(u(),c("div",zo,[m[40]||(m[40]=e("h4",{class:"quiz__form_head"},"дополнительная информация",-1)),e("div",$o,[e("div",No,[m[21]||(m[21]=e("label",{class:"form__label button"},[B("откуда вы о нас узнали?"),e("span",null,"*")],-1)),z(A(Ae),{modelValue:s.platforms,"onUpdate:modelValue":m[0]||(m[0]=g=>s.platforms=g),multiple:"",placeholder:"Выберите площадки",class:w({error:t.platforms}),size:"large",onChange:R},{default:ke(()=>[(u(),c(ue,null,he(o,g=>z(A(xe),{key:g.value,label:g.label,value:g.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","class"]),t.platforms?(u(),c("div",Co,C(t.platforms),1)):f("",!0),s.platforms.includes("other")?(u(),c("div",So,[z(A(D),{modelValue:s.otherPlatform,"onUpdate:modelValue":m[1]||(m[1]=g=>s.otherPlatform=g),type:"text",placeholder:"Укажите другие площадки",class:w({error:t.otherPlatform}),onBlur:R,onInput:m[2]||(m[2]=g=>t.otherPlatform=""),size:"large"},null,8,["modelValue","class"]),t.otherPlatform?(u(),c("div",qo,C(t.otherPlatform),1)):f("",!0)])):f("",!0)]),e("div",Fo,[m[23]||(m[23]=e("label",{for:"rightsInfo",class:"form__label button"},"Правила на инструменты",-1)),m[24]||(m[24]=e("p",{class:"form__hint text_small"},[B("В поле ниже, пожалуйста, укажите в столбик «Название трека – тип прав». Эта информация поможет загрузить релиз на площадки и соблюсти сроки. Если у вас только один трек, то напишите для одного трека. Если у вас несколько треков, то напишите для каждого трека. По желанию, вы можете прикрепить ссылку на сам договор на "),e("a",{href:"https://360.yandex.ru/disk/"},"Яндекс Диске"),B(" – это не обязательно.")],-1)),z(A(D),{modelValue:s.rightsInfo,"onUpdate:modelValue":m[3]||(m[3]=g=>s.rightsInfo=g),type:"textarea",rows:6,placeholder:`1. Название первого трека - исключительная лицензия
2. Название второго трека - wav лицензия
3. Название третьего трека - полное отчуждение прав
4. Название четвертого трека - я автор 100% музыки`,onInput:m[4]||(m[4]=g=>t.rightsInfo=""),size:"large"},null,8,["modelValue"]),e("div",Vo,[m[22]||(m[22]=e("label",{for:"rightsContractLink",class:"form__label button text_small"},[B("Ссылка на договор в "),e("a",{href:"https://360.yandex.ru/disk/"},"Яндекс Диске"),B(" (не обязательно)")],-1)),z(A(D),{modelValue:s.rightsContractLink,"onUpdate:modelValue":m[5]||(m[5]=g=>s.rightsContractLink=g),type:"text",placeholder:"https://disk.yandex.ru/...",onBlur:m[6]||(m[6]=g=>P("rightsContractLink")),onInput:m[7]||(m[7]=g=>t.rightsContractLink=""),size:"large"},null,8,["modelValue"]),t.rightsContractLink?(u(),c("div",xo,C(t.rightsContractLink),1)):f("",!0)])]),e("div",Ao,[m[25]||(m[25]=e("label",{for:"additionalComments",class:"form__label button"},"дополнительные комментарии",-1)),m[26]||(m[26]=e("p",{class:"form__hint text_small"},"Почти закончили! Напишите все, что считаете важным. Если вы пропустили какую-то информацию, у вас есть особые пожелания - самое время рассказать о них.",-1)),z(A(D),{modelValue:s.additionalComments,"onUpdate:modelValue":m[8]||(m[8]=g=>s.additionalComments=g),type:"textarea",rows:4,placeholder:"Ваши комментарии и пожелания...",onInput:m[9]||(m[9]=g=>t.additionalComments=""),size:"large"},null,8,["modelValue"])]),e("div",To,[m[27]||(m[27]=e("label",{for:"promoPlan",class:"form__label button"},"Промо-план релиза для редакторов площадок",-1)),m[28]||(m[28]=e("p",{class:"form__hint text_small"},"Добавьте кратко информацию об артисте, готовящемся релизе (1-2 предложения), где и с каким бюджетом будет делаться реклама (если планируется). Эта информация повысит шансы на получение поддержки от площадок.",-1)),z(A(D),{modelValue:s.promoPlan,"onUpdate:modelValue":m[10]||(m[10]=g=>s.promoPlan=g),type:"textarea",rows:4,placeholder:"Информация об артисте, релизе, планах по рекламе...",onInput:m[11]||(m[11]=g=>t.promoPlan=""),size:"large"},null,8,["modelValue"])]),e("div",Lo,[m[29]||(m[29]=e("label",{for:"bandlinkUrl",class:"form__label button"},"ССЫЛКА НА ВАШ ПРЕДСТОЯЩИЙ РЕЛИЗ В BANDLINK",-1)),m[30]||(m[30]=e("p",{class:"form__hint text_small"},[B("Если у вас есть верифицированный профиль "),e("a",{href:"https://Band.link",target:"_blank"},"Band.link"),B(", то зайдите туда, перейдите в раздел «Страницы» и нажмите «Создать Bandlink». Создайте страницу релиз, указав псевдоним и название будущего релиза. Далее нажмите «Превью страницы» и скопируйте получившуюся ссылку. Её и нужно вставить в поле слева. Если у вас нет профиля в Band.link, пропустить это поле.")],-1)),z(A(D),{modelValue:s.bandlinkUrl,"onUpdate:modelValue":m[12]||(m[12]=g=>s.bandlinkUrl=g),type:"text",class:w({error:t.bandlinkUrl}),placeholder:"https://band.link/...",onBlur:m[13]||(m[13]=g=>P("bandlinkUrl")),onInput:m[14]||(m[14]=g=>t.bandlinkUrl=""),size:"large"},null,8,["modelValue","class"]),t.bandlinkUrl?(u(),c("div",wo,C(t.bandlinkUrl),1)):f("",!0)]),e("div",Bo,[m[31]||(m[31]=e("label",{for:"promoCode",class:"form__label button"},"промокод",-1)),m[32]||(m[32]=e("p",{class:"form__hint text_small"},"vauvision-promo",-1)),z(A(D),{modelValue:s.promoCode,"onUpdate:modelValue":m[15]||(m[15]=g=>s.promoCode=g),type:"text",placeholder:"Введите промокод",onInput:m[16]||(m[16]=g=>t.promoCode=""),size:"large"},null,8,["modelValue"])]),e("div",Mo,[m[34]||(m[34]=e("h5",{class:"form__label"},"бонусы партнера",-1)),e("div",Uo,[z(A(Ve),{modelValue:s.usePartnerBonuses,"onUpdate:modelValue":m[17]||(m[17]=g=>s.usePartnerBonuses=g),onChange:m[18]||(m[18]=g=>t.usePartnerBonuses="")},{default:ke(()=>m[33]||(m[33]=[B(" Использовать бонусы партнера ")])),_:1},8,["modelValue"])])]),e("div",Do,[e("div",Po,[m[36]||(m[36]=e("p",{class:"quiz__form_sum_text"},"Итого к оплате:",-1)),e("h4",Eo,[e("span",null,C(h.value),1),m[35]||(m[35]=B(" ₽"))])])]),e("div",Ro,[e("div",Oo,[z(A(Ve),{modelValue:s.confirmNoRightsViolation,"onUpdate:modelValue":m[19]||(m[19]=g=>s.confirmNoRightsViolation=g),class:w({error:t.confirmNoRightsViolation}),onChange:m[20]||(m[20]=g=>L("confirmNoRightsViolation"))},{default:ke(()=>m[37]||(m[37]=[B(" Я подтверждаю, что мои треки не нарушают права других авторов музыки и текста* ")])),_:1},8,["modelValue","class"])]),t.confirmNoRightsViolation?(u(),c("div",Go,C(t.confirmNoRightsViolation),1)):f("",!0)])]),e("div",Yo,[e("div",Qo,[e("button",{class:"form__back button__second button",onClick:p},[e("span",null,[z(pe)]),m[38]||(m[38]=e("span",null,"Назад",-1))]),e("button",{class:"quiz__form_button button__black button",onClick:G,disabled:!T.value},m[39]||(m[39]=[e("span",null,"Далее: Договор",-1)]),8,Io)])])]))}}),Ko=ae(Jo,[["__scopeId","data-v-8d9afec5"]]),jo="/assets/agreement_1-Bbxv1Hwv.webp",Wo="/assets/agreement_2-CWBRZBdz.webp",Ho="/assets/agreement_3-CaLoCjKU.webp",Xo="/assets/agreement_4-Dp6hIgbP.webp",Zo={class:"signature__popup"},er={class:"signature__canvas_container"},tr={class:"signature__controls"},sr=["disabled"],Re="signature_data",lr=_e({__name:"Signature",emits:["close","submit"],setup(oe,{emit:I}){const Q=I,s=O(null),t=O(!1),o=O(0),h=O(0),F=O(!1);let x=null;const $=()=>{if(s.value)try{const l=s.value.toDataURL("image/png");localStorage.setItem(Re,l)}catch(l){console.error("Error saving signature to localStorage:",l)}},L=()=>{try{const l=localStorage.getItem(Re);if(l&&x&&s.value){const _=new Image;_.onload=()=>{x.clearRect(0,0,s.value.width,s.value.height),x.drawImage(_,0,0),F.value=!0},_.src=l}}catch(l){console.error("Error loading signature from localStorage:",l)}},P=()=>{localStorage.removeItem(Re)},R=()=>{if(!s.value)return;const l=s.value,_=l.getContext("2d");if(!_)return;x=_;const J=window.devicePixelRatio||1,ee=l.getBoundingClientRect();l.width=ee.width*J,l.height=ee.height*J,_.scale(J,J),_.lineWidth=2,_.lineCap="round",_.lineJoin="round",_.strokeStyle="#000000",_.clearRect(0,0,l.width,l.height),_.fillStyle="#ffffff",_.fillRect(0,0,l.width,l.height),L()},T=l=>{if(!s.value)return;const _=s.value.getBoundingClientRect();o.value=l.clientX-_.left,h.value=l.clientY-_.top,t.value=!0},p=l=>{if(!t.value||!x||!s.value)return;const _=s.value.getBoundingClientRect(),J=l.clientX-_.left,ee=l.clientY-_.top;x.beginPath(),x.moveTo(o.value,h.value),x.lineTo(J,ee),x.stroke(),o.value=J,h.value=ee,F.value=!0,$()},G=l=>{if(l.preventDefault(),!s.value||l.touches.length===0)return;const _=s.value.getBoundingClientRect(),J=l.touches[0];o.value=J.clientX-_.left,h.value=J.clientY-_.top,t.value=!0},N=l=>{if(l.preventDefault(),!t.value||!x||!s.value||l.touches.length===0)return;const _=s.value.getBoundingClientRect(),J=l.touches[0],ee=J.clientX-_.left,fe=J.clientY-_.top;x.beginPath(),x.moveTo(o.value,h.value),x.lineTo(ee,fe),x.stroke(),o.value=ee,h.value=fe,F.value=!0,$()},m=()=>{t.value=!1,$()},g=()=>{if(!x||!s.value)return;const l=x,_=s.value;l.clearRect(0,0,_.width,_.height),l.fillStyle="#ffffff",l.fillRect(0,0,_.width,_.height),F.value=!1,P()},j=()=>{if(!s.value)return;const l=s.value.toDataURL("image/png");P(),Q("submit",l)},k=()=>{Q("close")},v=()=>{R()},S=()=>{$()};return ze(()=>{rt(()=>{R()}),window.addEventListener("resize",v),window.addEventListener("beforeunload",S)}),Ze(()=>{window.removeEventListener("resize",v),window.removeEventListener("beforeunload",S)}),(l,_)=>(u(),c("div",{class:"signature__popup_overlay",onClick:ge(k,["self"])},[e("div",Zo,[e("button",{class:"signature__popup_close",onClick:k},_[0]||(_[0]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),e("div",er,[e("canvas",{ref_key:"signatureCanvas",ref:s,onMousedown:T,onMousemove:p,onMouseup:m,onMouseleave:m,onTouchstart:G,onTouchmove:N,onTouchend:m}," Ваш браузер не поддерживает Canvas ",544),_[1]||(_[1]=e("h5",{class:"signature__hint"},"нарисуйте подпись",-1))]),e("div",tr,[e("button",{class:"signature__clear button__black button",onClick:g},_[2]||(_[2]=[e("span",null,"Очистить",-1)])),e("button",{class:"signature__submit button__red button",onClick:j,disabled:!F.value},_[3]||(_[3]=[e("span",null,"Подписать",-1)]),8,sr)])])]))}}),ar=ae(lr,[["__scopeId","data-v-35816f66"]]),or={class:"quiz__form quiz__form_seven"},rr={class:"quiz__form_checkboxes"},ir={key:0,class:"error text_very"},nr={key:0,class:"error text_very"},ur={class:"form__checkbox_group"},dr={class:"quiz__form_bottom"},mr={class:"quiz__form_buttons"},_r=["disabled"],cr={key:0,class:"quiz__form_hint"},Oe="quiz7_state",pr=_e({__name:"Quiz7",emits:["go-back","go-next"],setup(oe,{expose:I,emit:Q}){const s=Q,t=O(!1),o=ye({acceptTerms:!1,acceptPrivacy:!1,acceptMarketing:!1}),h=ye({acceptTerms:"",acceptPrivacy:"",acceptMarketing:""}),F=()=>{try{const k={formData:o};localStorage.setItem(Oe,JSON.stringify(k))}catch(k){console.error("Error saving state to localStorage:",k)}},x=()=>{try{const k=localStorage.getItem(Oe);if(k){const v=JSON.parse(k);Object.assign(o,v.formData)}}catch(k){console.error("Error loading state from localStorage:",k)}},$=()=>{localStorage.removeItem(Oe)},L={acceptTerms:k=>k?"":"Необходимо принять условия оферты",acceptPrivacy:k=>k?"":"Необходимо дать согласие на обработку персональных данных",acceptMarketing:k=>""},P=k=>{const v=o[k],S=L[k];return S?(h[k]=S(v),F(),!h[k]):!0},R=()=>{let k=!0;return["acceptTerms","acceptPrivacy"].forEach(S=>{P(S)||(k=!1)}),F(),k},T=ce(()=>o.acceptTerms&&o.acceptPrivacy),p=k=>{P(k),k==="acceptTerms"&&o.acceptTerms&&(h.acceptTerms=""),k==="acceptPrivacy"&&o.acceptPrivacy&&(h.acceptPrivacy=""),k==="acceptMarketing"&&(h.acceptMarketing="")},G=()=>{s("go-back")},N=()=>{if(R()){const v=document.querySelector(".quiz__form_agreement");if(v){const S=v.getBoundingClientRect().bottom,l=window.innerHeight;if(S>l+100){Y.warning({message:"Пожалуйста, просмотрите договор полностью перед продолжением",duration:3e3}),v.scrollIntoView({behavior:"smooth",block:"start"});return}}t.value=!0,document.documentElement.classList.add("noscroll")}else{Y.warning({message:"Пожалуйста, примите обязательные условия договора",duration:3e3});const v=document.querySelector(".error");v&&v.scrollIntoView({behavior:"smooth",block:"center"})}},m=()=>{t.value=!1,document.documentElement.classList.remove("noscroll")},g=k=>{console.log("Подпись получена:",k),m();const v={acceptTerms:o.acceptTerms,acceptPrivacy:o.acceptPrivacy,acceptMarketing:o.acceptMarketing,signature:k,timestamp:new Date().toISOString()};console.log("Данные договора с подписью:",v),$(),s("go-next",v)};return I({validateForm:R,scrollToCheckboxes:()=>{const k=document.querySelector(".quiz__form_checkboxes");k&&k.scrollIntoView({behavior:"smooth",block:"start"})}}),ze(()=>{x()}),(k,v)=>(u(),c("div",or,[v[12]||(v[12]=le('<h4 class="quiz__form_head" data-v-b752bd16>Договор</h4><p class="quiz__form_description" data-v-b752bd16>Пожалуйста, проверьте договор. Если всё верно, то переходите к следующему шагу и оплате. Если нужно что-то исправить, то вернитесь назад. Для перехода на следующий шаг пролистайте вниз страницы.</p><div class="quiz__form_agreement" data-v-b752bd16><img src="'+jo+'" alt="Страница 1 договора" loading="lazy" data-v-b752bd16><img src="'+Wo+'" alt="Страница 2 договора" loading="lazy" data-v-b752bd16><img src="'+Ho+'" alt="Страница 3 договора" loading="lazy" data-v-b752bd16><img src="'+Xo+'" alt="Страница 4 договора" loading="lazy" data-v-b752bd16></div>',3)),e("div",rr,[e("div",{class:w(["form__checkbox_group",{error:h.acceptTerms}])},[z(A(Ve),{modelValue:o.acceptTerms,"onUpdate:modelValue":v[0]||(v[0]=S=>o.acceptTerms=S),onChange:v[1]||(v[1]=()=>p("acceptTerms")),size:"large"},{default:ke(()=>v[6]||(v[6]=[e("span",{class:"checkbox__text"},[B(" Я принимаю условия "),e("a",{href:"/offer",target:"_blank",class:"checkbox__link"},"публичной оферты"),B("* ")],-1)])),_:1},8,["modelValue"]),h.acceptTerms?(u(),c("div",ir,C(h.acceptTerms),1)):f("",!0)],2),e("div",{class:w(["form__checkbox_group",{error:h.acceptPrivacy}])},[z(A(Ve),{modelValue:o.acceptPrivacy,"onUpdate:modelValue":v[2]||(v[2]=S=>o.acceptPrivacy=S),onChange:v[3]||(v[3]=()=>p("acceptPrivacy")),size:"large"},{default:ke(()=>v[7]||(v[7]=[e("span",{class:"checkbox__text"},[B(" Я даю согласие на обработку "),e("a",{href:"/privacy",target:"_blank",class:"checkbox__link"},"персональных данных"),B("* ")],-1)])),_:1},8,["modelValue"]),h.acceptPrivacy?(u(),c("div",nr,C(h.acceptPrivacy),1)):f("",!0)],2),e("div",ur,[z(A(Ve),{modelValue:o.acceptMarketing,"onUpdate:modelValue":v[4]||(v[4]=S=>o.acceptMarketing=S),onChange:v[5]||(v[5]=()=>p("acceptMarketing")),size:"large"},{default:ke(()=>v[8]||(v[8]=[e("span",{class:"checkbox__text"}," Я даю согласие на получение рекламных рассылок и специальных предложений ",-1)])),_:1},8,["modelValue"])])]),e("div",dr,[e("div",mr,[e("button",{class:"form__back button__second button",onClick:G},[e("span",null,[z(pe)]),v[9]||(v[9]=e("span",null,"Назад",-1))]),e("button",{class:w(["quiz__form_button button__black button",{button__disabled:!T.value}]),onClick:N,disabled:!T.value},v[10]||(v[10]=[e("span",null,"подписать договор и оплатить",-1)]),10,_r)]),T.value?f("",!0):(u(),c("div",cr,v[11]||(v[11]=[e("p",{class:"text_small"},"Обязательно дождитесь полной загрузки формы, не закрывайте вкладку! Спасибо, что выбрали нас!",-1)])))]),t.value?(u(),ve(ar,{key:0,onClose:m,onSubmit:g})):f("",!0)]))}}),fr=ae(pr,[["__scopeId","data-v-b752bd16"]]),vr={class:"quiz__form quiz__form_eight"},gr={class:"quiz__summary"},kr={class:"quiz__summary_section"},br={class:"quiz__summary_content"},hr={key:0},yr={key:1},zr={key:2},$r={key:3},Nr={key:0,class:"quiz__summary_section"},Cr={class:"quiz__summary_content"},Sr={key:1,class:"quiz__summary_section"},qr={class:"quiz__summary_content"},Fr={key:2,class:"quiz__summary_section"},Vr={class:"quiz__form_bottom"},xr={class:"quiz__form_buttons"},Ar=["disabled"],Tr=["disabled"],Lr={key:0},wr={key:1},Br=_e({__name:"Quiz8",emits:["go-back","finish"],setup(oe,{emit:I}){const Q=I,s=O(!1),t=ce(()=>{const $={};[1,2,3,4,5,6,7].forEach(P=>{try{const R=localStorage.getItem(`quiz${P}_state`);if(R){const T=JSON.parse(R);switch(P){case 1:Object.assign($,T);break;case 2:$.singleTracks=T.singleTracks||[],$.albums=T.albums||[],$.singleCount=T.singleCount||0,$.albumCount=T.albumCount||0;break;case 3:$.releaseInfo=T.formData||{},$.coverFileName=T.coverFileName||"",$.coverFileSize=T.coverFileSize||0;break;case 4:$.passportInfo=T.formData||{};break;case 5:Object.assign($,T.formData||{}),$.appleMusicFileName=T.appleMusicFileName||"",$.appleMusicFileSize=T.appleMusicFileSize||0,$.karaokeFileName=T.karaokeFileName||"",$.karaokeFileSize=T.karaokeFileSize||0;break;case 6:$.additionalInfo=T.formData||{};break;case 7:$.agreement=T||{};break}}}catch(R){console.error(`Error collecting data from step ${P}:`,R)}});try{const P=localStorage.getItem("signature_data");P&&($.signature=P)}catch(P){console.error("Error collecting signature:",P)}return $}),o=()=>t.value,h=$=>{var R;const L=((R=$.singleTracks)==null?void 0:R.length)||0;let P=0;return $.albums&&Array.isArray($.albums)&&(P=$.albums.reduce((T,p)=>{var N;const G=((N=p.tracks)==null?void 0:N.length)||0;return T+G},0)),L+P},F=()=>{Q("go-back")},x=async()=>{var $,L,P,R,T;try{s.value=!0;const p=o();console.log("Все собранные данные:",p);let G=!1;const N=[];(p.singleCount||0)+(p.albumCount||0)+(p.clipCount||0)+(p.cardCount||0)===0&&(N.push("Не выбраны треки для загрузки (шаг 1)"),G=!0),p.singleCount&&p.singleCount>0&&(!p.singleTracks||p.singleTracks.length===0)&&(N.push("Не заполнены данные о синглах (шаг 2)"),G=!0),p.albumCount&&p.albumCount>0&&(!p.albums||p.albums.length===0)&&(N.push("Не заполнены данные об альбомах (шаг 2)"),G=!0);const g=(($=p.releaseInfo)==null?void 0:$.performerName)||"",j=((L=p.releaseInfo)==null?void 0:L.email)||"";(!g||!j)&&(N.push("Не заполнены обязательные поля информации о треке (шаг 3)"),G=!0);const k=((P=p.passportInfo)==null?void 0:P.lastName)||"",v=((R=p.passportInfo)==null?void 0:R.firstName)||"";if((!k||!v)&&(N.push("Не заполнены паспортные данные (шаг 4)"),G=!0),((T=p.additionalInfo)==null?void 0:T.confirmNoRightsViolation)||!1||(N.push("Не подтверждено отсутствие нарушений прав (шаг 6)"),G=!0),p.signature||(N.push("Требуется подпись договора"),G=!0),G){N.forEach(J=>Y.error(J)),s.value=!1;return}new FormData().append("quizData",JSON.stringify(p)),await new Promise(J=>setTimeout(J,2e3));const _={...p,submittedAt:new Date().toISOString(),status:"submitted",totalTracks:h(p)};localStorage.setItem("quiz_final_submission",JSON.stringify(_)),[1,2,3,4,5,6,7].forEach(J=>{localStorage.removeItem(`quiz${J}_state`)}),localStorage.removeItem("signature_data"),Y.success({message:"Все данные успешно отправлены!",duration:3e3}),Q("finish")}catch(p){console.error("Ошибка отправки данных:",p),Y.error({message:"Произошла ошибка при отправке данных",duration:3e3})}finally{s.value=!1}};return ze(()=>{console.log("Данные на последнем шаге:",t.value)}),($,L)=>(u(),c("div",vr,[L[9]||(L[9]=e("h4",{class:"quiz__form_head"},"Отправка данных",-1)),e("div",gr,[L[6]||(L[6]=e("h5",{class:"quiz__summary_title"},"Сводка данных",-1)),e("div",kr,[L[0]||(L[0]=e("h6",null,"Шаг 1: Количество треков",-1)),e("div",br,[t.value.singleCount?(u(),c("p",hr,"Синглов: "+C(t.value.singleCount),1)):f("",!0),t.value.albumCount?(u(),c("p",yr,"Альбомов: "+C(t.value.albumCount),1)):f("",!0),t.value.clipCount?(u(),c("p",zr,"Клипов: "+C(t.value.clipCount),1)):f("",!0),t.value.cardCount?(u(),c("p",$r,"Оформлений карточек: "+C(t.value.cardCount),1)):f("",!0)])]),t.value.singleTracks&&t.value.singleTracks.length>0?(u(),c("div",Nr,[L[1]||(L[1]=e("h6",null,"Шаг 2: Синглы",-1)),e("div",Cr,[(u(!0),c(ue,null,he(t.value.singleTracks,(P,R)=>(u(),c("div",{key:R},[e("p",null,[e("strong",null,"Сингл "+C(R+1)+":",1),B(" "+C(P.trackName||"Без названия"),1)])]))),128))])])):f("",!0),t.value.releaseInfo?(u(),c("div",Sr,[L[4]||(L[4]=e("h6",null,"Шаг 3: Информация о релизе",-1)),e("div",qr,[e("p",null,[L[2]||(L[2]=e("strong",null,"Артист:",-1)),B(" "+C(t.value.releaseInfo.performerName||"Не указано"),1)]),e("p",null,[L[3]||(L[3]=e("strong",null,"Email:",-1)),B(" "+C(t.value.releaseInfo.email||"Не указано"),1)])])])):f("",!0),t.value.signature?(u(),c("div",Fr,L[5]||(L[5]=[e("h6",null,"Подпись договора",-1),e("div",{class:"quiz__summary_content"},[e("p",null,"✓ Подпись предоставлена")],-1)]))):f("",!0)]),e("div",Vr,[e("div",xr,[e("button",{class:"form__back button__second button",onClick:F,disabled:s.value},[e("span",null,[z(pe)]),L[7]||(L[7]=e("span",null,"Назад",-1))],8,Ar),e("button",{class:"quiz__form_button button__black button",onClick:x,disabled:s.value},[s.value?(u(),c("span",wr,"Отправка...")):(u(),c("span",Lr,"Продолжить"))],8,Tr)]),L[8]||(L[8]=e("div",{class:"quiz__form_hint"},[e("p",{class:"text_small"}," Нажмите кнопку выше для отправки всех данных из всех форм, включая файлы и подпись. ")],-1))])]))}}),Mr=ae(Br,[["__scopeId","data-v-4a3aea15"]]),Ur={class:"quiz__forms"},Dr=_e({__name:"QuizForm",emits:["go-back","update:current-step"],setup(oe,{expose:I,emit:Q}){const s=Q,t=O(1),o=ye({singleCount:0,albumCount:0,clipCount:0,cardCount:0,singleTracks:[],albumTracks:[],prices:{single:2590,album:2590,clip:2590,card:2590}}),h=O(0),F=(k,v)=>{o[`${k}Count`]=v,k==="single"?x(v):k==="album"&&$(v),L()},x=k=>{const v=o.singleTracks.length;if(k>v)for(let S=v;S<k;S++)o.singleTracks.push({id:`single-${Date.now()}-${Math.random()}`,performerName:"",musicAuthor:"",textAuthor:"",trackName:"",referralCode:"",audioFile:null,audioFileName:"",audioFileSize:0,uploaded:!1});else k<v&&o.singleTracks.splice(k)},$=k=>{const v=o.albumTracks.length;if(k>v)for(let S=v;S<k;S++)o.albumTracks.push({id:`album-${Date.now()}-${Math.random()}`,albumName:"",performerName:"",musicAuthor:"",textAuthor:"",referralCode:"",tracks:[]});else k<v&&o.albumTracks.splice(k)},L=()=>{h.value=o.singleCount*o.prices.single+o.albumCount*o.prices.album+o.clipCount*o.prices.clip+o.cardCount*o.prices.card},P=(k,v)=>{k>=0&&k<o.singleTracks.length&&Object.assign(o.singleTracks[k],v)},R=(k,v)=>{k>=0&&k<o.albumTracks.length&&Object.assign(o.albumTracks[k],v)},T=(k,v)=>{k>=0&&k<o.albumTracks.length&&o.albumTracks[k].tracks.push(v)},p=(k,v)=>{k>=0&&k<o.albumTracks.length&&v>=0&&v<o.albumTracks[k].tracks.length&&o.albumTracks[k].tracks.splice(v,1)},G=()=>o.singleCount===0?!0:o.singleTracks.every(k=>k.performerName.trim().length>=2&&k.musicAuthor.trim().length>=2&&k.textAuthor.trim().length>=2&&k.trackName.trim().length>=2&&k.audioFile!==null&&k.uploaded),N=()=>o.albumCount===0?!0:o.albumTracks.every(k=>k.albumName.trim().length>=2&&k.performerName.trim().length>=2&&k.musicAuthor.trim().length>=2&&k.textAuthor.trim().length>=2&&k.tracks.length>0&&k.tracks.every(v=>v.trackName.trim().length>=2&&v.audioFile!==null&&v.uploaded)),m=k=>{t.value=k,s("update:current-step",k)},g=()=>{t.value===1?s("go-back"):m(t.value-1)},j=()=>{Y.success("Процесс загрузки завершен!"),console.log("Данные для отправки:",{singleCount:o.singleCount,albumCount:o.albumCount,clipCount:o.clipCount,cardCount:o.cardCount,singleTracks:o.singleTracks,albumTracks:o.albumTracks,totalSum:h.value})};return I({quizState:o,totalSum:h,updateCounts:F,updateSingleTrack:P,updateAlbum:R,addAlbumTrack:T,removeAlbumTrack:p,areAllSingleTracksComplete:G,areAllAlbumsComplete:N,calculateTotalSum:L}),(k,v)=>(u(),c("div",Ur,[z(ut,{"current-step":t.value,onGoToStep:m},null,8,["current-step"]),t.value===1?(u(),ve(xt,{key:0,onGoBack:g,onGoNext:v[0]||(v[0]=S=>m(2))})):f("",!0),t.value===2?(u(),ve(el,{key:1,onGoBack:g,onGoNext:v[1]||(v[1]=S=>m(3))})):f("",!0),t.value===3?(u(),ve(Ol,{key:2,onGoBack:g,onGoNext:v[2]||(v[2]=S=>m(4))})):f("",!0),t.value===4?(u(),ve(Ma,{key:3,onGoBack:g,onGoNext:v[3]||(v[3]=S=>m(5))})):f("",!0),t.value===5?(u(),ve(yo,{key:4,onGoBack:g,onGoNext:v[4]||(v[4]=S=>m(6))})):f("",!0),t.value===6?(u(),ve(Ko,{key:5,onGoBack:g,onGoNext:v[5]||(v[5]=S=>m(7))})):f("",!0),t.value===7?(u(),ve(fr,{key:6,onGoBack:g,onGoNext:v[6]||(v[6]=S=>m(8))})):f("",!0),t.value===8?(u(),ve(Mr,{key:7,onGoBack:g,onFinish:j})):f("",!0)]))}}),Pr=ae(Dr,[["__scopeId","data-v-063033df"]]),Er={class:"personal"},Rr={class:"container personal__container"},Or={class:"personal__block"},Gr={class:"quiz__flex"},Yr={class:"quiz__content"},Qr={key:0,class:"quiz__preview"},Ir=_e({__name:"Quiz",setup(oe){const I=O(!1),Q=O(1),s=()=>{I.value=!0},t=h=>{Q.value=h},o=()=>{I.value=!1,Q.value=1};return(h,F)=>(u(),c(ue,null,[z(at),e("section",Er,[e("div",Rr,[z(ot),e("div",Or,[e("div",Gr,[e("div",Yr,[I.value?f("",!0):(u(),c("div",Qr,[F[1]||(F[1]=le('<h4 class="quiz__preview_heading" data-v-609f4a27>Форма размещения треков Vauvision</h4><p class="quiz__preview_description" data-v-609f4a27>Пожалуйста, заполните все пункты максимально подробно – это позволит нам сделать нашу работу качественно.</p><p class="quiz__preview_attention" data-v-609f4a27>Внимание!</p><ul class="quiz__preview_list" data-v-609f4a27><li class="quiz__preview_item" data-v-609f4a27><p class="quiz__preview_desc" data-v-609f4a27>Рекомендуется закладывать минимум 3 рабочих дня на загрузку релиза.</p></li><li data-v-609f4a27><p class="quiz__preview_desc" data-v-609f4a27>Треки выходят на площадках в 00:00 выбранной даты (по Москве).</p></li><li data-v-609f4a27><p class="quiz__preview_desc" data-v-609f4a27>Для редактирования размера обложек используйте сайт <a href="https://pixlr.com" target="`_blank" data-v-609f4a27>pixlr.com</a></p></li><li data-v-609f4a27><p class="quiz__preview_desc" data-v-609f4a27>Для редактирования формата треков используйте конвертер <a href="https://online-audio-converter.com" target="`_blank" data-v-609f4a27>online-audio-converter.com</a></p></li><li data-v-609f4a27><p class="quiz__preview_desc" data-v-609f4a27>После заполнения этой формы, пожалуйста, напишите сообщение в формате &quot;Ваш псевдоним - Название релиза - ДИСТРИБУЦИЯ&quot; в сообщения паблика <a href="https://vk.com/vauvisionlabel" target="`_blank" data-v-609f4a27>vk.com/vauvisionlabel</a>, либо <a href="https://t.me/vauvision_bot" data-v-609f4a27>телеграмм</a>.</p></li><li data-v-609f4a27><p class="quiz__preview_desc" data-v-609f4a27>Перед загрузкой клипа прочтите инструкцию.</p></li></ul>',4)),e("div",{class:"quiz__preview_buttons"},[e("button",{class:"quiz__preview_button button__black button",onClick:s},F[0]||(F[0]=[e("span",null,"Продолжить",-1)]))])])),I.value?(u(),ve(Pr,{key:1,"current-step":Q.value,"onUpdate:currentStep":t,onGoBack:o},null,8,["current-step"])):f("",!0)])])])])])],64))}}),pi=ae(Ir,[["__scopeId","data-v-609f4a27"]]);export{pi as default};
