import{d as G,b as y,Z as T,k as K,c as i,U as m,a as s,I as c,T as b,R as _,O as D,P as U,ag as z,F as W,ai as C,o as n,M as x,u as V}from"./@vue-DwLU1mub.js";import{H as q,M as J}from"./Menu-D6FPUzMa.js";import{v as $,h as I}from"./@element-plus-m0wAbjkV.js";import{E as d,a as h}from"./element-plus-mA3Xe4M8.js";import{_ as Q}from"./index-HQzyi3DG.js";import"./vue-router-CPimp6oI.js";import"./Logo-S72cmeIj.js";import"./ArticlesSVG-DnVKD4C_.js";import"./lodash-es-CiJSjksT.js";import"./@vueuse-Q_cOxmjC.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-Ct2Knyoi.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DF51-gJp.js";import"./vue-i18n-DcgfqTZL.js";import"./@intlify-CQT3u4ju.js";import"./vue-tel-input-BsVA42h1.js";const X={class:"personal"},Y={class:"container personal__container"},ee={class:"personal__block"},se={class:"setting__flex"},te={class:"setting__content"},le={class:"setting__photo"},ae={class:"setting__photo_flex"},oe={class:"setting__photo_image"},re=["src"],ne={key:1,style:{width:"100px",height:"100px","border-radius":"50%",background:"#f0f0f0",display:"flex","align-items":"center","justify-content":"center"}},ie={class:"setting__photo_info"},de=["disabled"],ue={key:0},me={key:1},_e=["disabled"],pe=["disabled"],ce={class:"setting__personal"},be={class:"setting__personal_flex"},fe={class:"form__group"},ve={key:0,class:"error text_very"},ke={class:"form__group"},ge={key:0,class:"error text_very"},ye={class:"setting__personal_buttons"},we=["disabled"],Ne={key:0},De={key:1},xe={class:"setting__general"},Ve={class:"setting__general_flex"},Pe={class:"form__group"},he={key:0,class:"error text_very"},Be={class:"form__group"},Te={key:0,class:"error text_very"},Ue={class:"form__group"},ze={key:0,class:"error text_very"},Ce={class:"setting__general_buttons"},$e=["disabled"],Ie={key:0},Ee={key:1},Me={class:"setting__passport"},Ae={class:"setting__passport_buttons"},Fe=["disabled"],je={class:"setting__password"},Re={class:"setting__password_flex"},Se={class:"form__group"},He={key:0,class:"error text_very"},Le={class:"form__group"},Oe={key:0,class:"error text_very"},Ze={class:"setting__password_buttons"},Ge=["disabled"],Ke={key:0},We={key:1},qe={class:"setting__details"},Je={class:"setting__details_flex"},Qe={class:"form__labels"},Xe={class:"form__label"},Ye=["disabled"],es={class:"form__label"},ss=["disabled"],ts={class:"form__groups"},ls={class:"form__group"},as={key:0,class:"error text_very"},os={class:"form__group"},rs={key:0,class:"error text_very"},ns={class:"form__group"},is={key:0,class:"error text_very"},ds={key:0,class:"form__group"},us={key:0,class:"error text_very"},ms={key:1,class:"form__group"},_s={key:0,class:"error text_very"},ps={class:"setting__details_buttons"},cs=["disabled"],bs={key:0},fs={key:1},vs={class:"setting__delete"},ks={class:"setting__delete_buttons"},gs=["disabled"],ys=G({__name:"Setting",setup(ws){const w=y(!1),N=y(!1),l=T({firstName:"",lastName:"",nickname:"",email:"",country:"",password:"",confirmPassword:"",passport:{series:"",number:"",issuedBy:"",issueDate:"",birthDate:"",registrationAddress:""},bankDetails:{userType:"executor",fullName:"",accountNumber:"",bik:"",inn:"",kpp:"",bankName:"",correspondentAccount:""}}),t=T({firstName:"",lastName:"",nickname:"",email:"",country:"",password:"",confirmPassword:"",passport:{},bankDetails:{}}),r=y(!1),g=y(null),v=y(!1),E=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),M=a=>a.length<8?"Пароль должен содержать минимум 8 символов":/[A-Z]/.test(a)?/[a-z]/.test(a)?/\d/.test(a)?"":"Пароль должен содержать цифру":"Пароль должен содержать строчную букву":"Пароль должен содержать заглавную букву",p=a=>{(!a||a==="firstName")&&(t.firstName=l.firstName?"":"Имя обязательно для заполнения"),(!a||a==="lastName")&&(t.lastName=l.lastName?"":"Фамилия обязательна для заполнения"),(!a||a==="nickname")&&(t.nickname=l.nickname?"":"Псевдоним обязателен для заполнения"),(!a||a==="email")&&(l.email?E(l.email)?t.email="":t.email="Введите корректный email":t.email="Email обязателен для заполнения"),(!a||a==="country")&&(t.country=l.country?"":"Страна обязательна для заполнения"),(!a||a==="password")&&(l.password?t.password=M(l.password):t.password=""),(!a||a==="confirmPassword")&&(l.confirmPassword?t.confirmPassword=l.password===l.confirmPassword?"":"Пароли не совпадают":t.confirmPassword="")},k=()=>{const a={};return l.bankDetails.fullName||(a.fullName="ФИО обязательно"),l.bankDetails.accountNumber||(a.accountNumber="Расчетный счет обязателен"),l.bankDetails.bik||(a.bik="БИК банка обязателен"),l.bankDetails.userType==="label"&&(l.bankDetails.inn||(a.inn="ИНН обязательно для ИП"),l.bankDetails.kpp||(a.kpp="КПП обязательно для ИП"),l.bankDetails.bankName||(a.bankName="Название банка обязательно")),t.bankDetails=a,Object.keys(a).length===0},A=K(()=>Object.values(t).some(a=>typeof a=="string"?a.length>0:!1)),F=async()=>{if(p(),t.firstName||t.lastName||t.email){d.error("Исправьте ошибки в форме");return}r.value=!0;try{await new Promise(a=>setTimeout(a,1e3)),d.success("Личные данные сохранены успешно")}catch{d.error("Ошибка при сохранении данных")}finally{r.value=!1}},j=async()=>{if(p("nickname"),p("email"),p("country"),t.nickname||t.email||t.country){d.error("Исправьте ошибки в форме");return}r.value=!0;try{await new Promise(a=>setTimeout(a,1e3)),d.success("Общие данные сохранены успешно")}catch{d.error("Ошибка при сохранении данных")}finally{r.value=!1}},R=async()=>{if(p("password"),p("confirmPassword"),t.password||t.confirmPassword){d.error("Исправьте ошибки в форме пароля");return}if(!l.password){d.error("Введите новый пароль");return}r.value=!0;try{await new Promise(a=>setTimeout(a,1e3)),d.success("Пароль успешно изменен"),l.password="",l.confirmPassword=""}catch{d.error("Ошибка при смене пароля")}finally{r.value=!1}},S=async()=>{if(!k()){d.error("Исправьте ошибки в банковских данных");return}r.value=!0;try{await new Promise(a=>setTimeout(a,1e3)),d.success("Банковские данные сохранены успешно")}catch{d.error("Ошибка при сохранении банковских данных")}finally{r.value=!1}},H=async a=>{var f;const e=a.target,u=(f=e.files)==null?void 0:f[0];if(u){if(!u.type.startsWith("image/")){d.error("Пожалуйста, выберите изображение");return}if(u.size>5*1024*1024){d.error("Размер файла не должен превышать 5MB");return}v.value=!0;try{await new Promise(P=>setTimeout(P,1e3));const o=new FileReader;o.onload=P=>{var B;g.value=(B=P.target)==null?void 0:B.result},o.readAsDataURL(u),d.success("Фото профиля загружено успешно")}catch{d.error("Ошибка при загрузке фото")}finally{v.value=!1,e.value=""}}},L=()=>{h.confirm("Вы уверены, что хотите удалить фото профиля?","Удаление фото",{confirmButtonText:"Удалить",cancelButtonText:"Отмена",type:"warning"}).then(()=>{g.value=null,d.success("Фото профиля удалено")}).catch(()=>{})},O=()=>{h.prompt("","Введите данные паспорта",{confirmButtonText:"Сохранить",cancelButtonText:"Отмена",title:"Паспортные данные",inputType:"textarea",inputPlaceholder:"Введите серию, номер и другие данные паспорта...",beforeClose:async(a,e,u)=>{if(a==="confirm"){const f=e.inputValue;if(f&&f.trim())try{await new Promise(o=>setTimeout(o,500)),d.success("Паспортные данные сохранены"),u()}catch{d.error("Ошибка при сохранении")}else{d.error("Введите данные");return}}else u()}}).catch(()=>{})},Z=()=>{h.confirm("Вы уверены, что хотите удалить аккаунт? Это действие нельзя отменить. Все ваши данные будут удалены.","Удаление аккаунта",{confirmButtonText:"Удалить",cancelButtonText:"Отмена",type:"error",confirmButtonClass:"el-button--danger",dangerouslyUseHTMLString:!0,message:`
        <div style="margin-bottom: 10px;">
          <strong>Внимание!</strong> Это действие нельзя отменить.
        </div>
        <div style="color: #f56c6c; margin-bottom: 10px;">
          Все ваши данные будут удалены без возможности восстановления.
        </div>
        <div style="color: #909399;">
          Для восстановления аккаунта напишите нам в поддержку.
        </div>
      `}).then(()=>{r.value=!0,setTimeout(()=>{d.success("Аккаунт удален"),r.value=!1},1e3)}).catch(()=>{})};return(()=>{l.firstName="Иван",l.lastName="Иванов",l.nickname="artist123",l.email="user@example.com",l.country="Россия"})(),(a,e)=>{const u=C("el-input"),f=C("el-icon");return n(),i(W,null,[m(q),s("section",X,[s("div",Y,[m(J),s("div",ee,[e[57]||(e[57]=s("div",{class:"setting__top"},[s("h3",{class:"setting__head"},"настройки профиля"),s("p",{class:"setting__desc"},"Измените данные или настройки профиля.")],-1)),s("div",se,[s("div",te,[s("div",le,[e[31]||(e[31]=s("h5",{class:"setting__photo_heading"},"Фото профиля",-1)),s("div",ae,[s("div",oe,[g.value?(n(),i("img",{key:0,src:g.value,alt:"Profile",style:{width:"100px",height:"100px","border-radius":"50%","object-fit":"cover"}},null,8,re)):(n(),i("div",ne,e[30]||(e[30]=[s("span",{style:{color:"#909399"}},"No photo",-1)])))]),s("div",ie,[s("label",{class:"setting__photo_upload button__primary",disabled:v.value},[v.value?(n(),i("span",me,"Загрузка...")):(n(),i("span",ue,"Загрузить фото")),s("input",{type:"file",accept:"image/*",onChange:H,style:{display:"none"},disabled:v.value},null,40,_e)],8,de),s("button",{class:"setting__photo_delete",onClick:L,disabled:!g.value||v.value}," Удалить фото ",8,pe)])])]),s("div",ce,[e[34]||(e[34]=s("h5",{class:"setting__personal_heading"},"Личные данные",-1)),s("div",be,[s("div",fe,[e[32]||(e[32]=s("label",{for:"firstName",class:"form__label button"},"Имя",-1)),m(u,{id:"firstName",modelValue:l.firstName,"onUpdate:modelValue":e[0]||(e[0]=o=>l.firstName=o),class:c({error:t.firstName}),placeholder:"Имя",disabled:r.value,onBlur:e[1]||(e[1]=o=>p("firstName")),onInput:e[2]||(e[2]=o=>t.firstName=""),size:"large"},null,8,["modelValue","class","disabled"]),t.firstName?(n(),i("div",ve,b(t.firstName),1)):_("",!0)]),s("div",ke,[e[33]||(e[33]=s("label",{for:"lastName",class:"form__label button"},"Фамилия",-1)),m(u,{id:"lastName",modelValue:l.lastName,"onUpdate:modelValue":e[3]||(e[3]=o=>l.lastName=o),class:c({error:t.lastName}),placeholder:"Фамилия",disabled:r.value,onBlur:e[4]||(e[4]=o=>p("lastName")),onInput:e[5]||(e[5]=o=>t.lastName=""),size:"large"},null,8,["modelValue","class","disabled"]),t.lastName?(n(),i("div",ge,b(t.lastName),1)):_("",!0)])]),s("div",ye,[s("button",{class:"setting__personal_button button__primary",onClick:F,disabled:r.value||A.value},[r.value?(n(),i("span",De,"Сохранение...")):(n(),i("span",Ne,"сохранить изменения"))],8,we)])]),s("div",xe,[e[38]||(e[38]=s("h5",{class:"setting__general_heading"},"Общие данные",-1)),s("div",Ve,[s("div",Pe,[e[35]||(e[35]=s("label",{for:"nickname",class:"form__label button"},"Псевдоним",-1)),m(u,{id:"nickname",modelValue:l.nickname,"onUpdate:modelValue":e[6]||(e[6]=o=>l.nickname=o),class:c({error:t.nickname}),placeholder:"Псевдоним",disabled:r.value,onBlur:e[7]||(e[7]=o=>p("nickname")),onInput:e[8]||(e[8]=o=>t.nickname=""),size:"large"},null,8,["modelValue","class","disabled"]),t.nickname?(n(),i("div",he,b(t.nickname),1)):_("",!0)]),s("div",Be,[e[36]||(e[36]=s("label",{for:"email",class:"form__label button"},"E-mail",-1)),m(u,{id:"email",modelValue:l.email,"onUpdate:modelValue":e[9]||(e[9]=o=>l.email=o),type:"email",class:c({error:t.email}),placeholder:"e-mail",disabled:r.value,onBlur:e[10]||(e[10]=o=>p("email")),onInput:e[11]||(e[11]=o=>t.email=""),size:"large"},null,8,["modelValue","class","disabled"]),t.email?(n(),i("div",Te,b(t.email),1)):_("",!0)]),s("div",Ue,[e[37]||(e[37]=s("label",{for:"country",class:"form__label button"},"Страна",-1)),m(u,{id:"country",modelValue:l.country,"onUpdate:modelValue":e[12]||(e[12]=o=>l.country=o),class:c({error:t.country}),placeholder:"страна",disabled:r.value,onBlur:e[13]||(e[13]=o=>p("country")),onInput:e[14]||(e[14]=o=>t.country=""),size:"large"},null,8,["modelValue","class","disabled"]),t.country?(n(),i("div",ze,b(t.country),1)):_("",!0)])]),s("div",Ce,[s("button",{class:"setting__general_button button__primary",onClick:j,disabled:r.value},[r.value?(n(),i("span",Ee,"Сохранение...")):(n(),i("span",Ie,"сохранить изменения"))],8,$e)])]),s("div",Me,[e[40]||(e[40]=s("h5",{class:"setting__passport_heading"},"данные паспорта",-1)),e[41]||(e[41]=s("p",{class:"setting__passport_desc"},"Введите данные для отображения в вашем договоре при выкладке релиза. Данные вашего паспорта скрыты для просмотра, но вы можете обновить их в любое время по кнопке «Изменить».",-1)),s("div",Ae,[s("button",{class:"setting__passport_button button__primary",onClick:O,disabled:r.value},e[39]||(e[39]=[s("span",null,"изменить",-1)]),8,Fe)])]),s("div",je,[e[44]||(e[44]=s("h5",{class:"setting__password_heading"},"Смена пароля",-1)),s("div",Re,[s("div",Se,[e[42]||(e[42]=s("label",{for:"password",class:"form__label button"},"Новый пароль",-1)),m(u,{id:"password",modelValue:l.password,"onUpdate:modelValue":e[16]||(e[16]=o=>l.password=o),type:w.value?"text":"password",class:c({error:t.password}),placeholder:"Введите новый пароль",disabled:r.value,onBlur:e[17]||(e[17]=o=>p("password")),onInput:e[18]||(e[18]=o=>t.password=""),size:"large"},{suffix:D(()=>[m(f,{onClick:e[15]||(e[15]=o=>w.value=!w.value),style:{color:"var(--el-text-color-placeholder)",cursor:"pointer"}},{default:D(()=>[w.value?(n(),x(V($),{key:0})):(n(),x(V(I),{key:1}))]),_:1})]),_:1},8,["modelValue","type","class","disabled"]),t.password?(n(),i("div",He,b(t.password),1)):_("",!0)]),s("div",Le,[e[43]||(e[43]=s("label",{for:"confirmPassword",class:"form__label button"},"Повторите пароль",-1)),m(u,{id:"confirmPassword",modelValue:l.confirmPassword,"onUpdate:modelValue":e[20]||(e[20]=o=>l.confirmPassword=o),type:N.value?"text":"password",class:c({error:t.confirmPassword}),placeholder:"Повторите новый пароль",disabled:r.value,onBlur:e[21]||(e[21]=o=>p("confirmPassword")),onInput:e[22]||(e[22]=o=>t.confirmPassword=""),size:"large"},{suffix:D(()=>[m(f,{onClick:e[19]||(e[19]=o=>N.value=!N.value),style:{color:"var(--el-text-color-placeholder)",cursor:"pointer"}},{default:D(()=>[N.value?(n(),x(V($),{key:0})):(n(),x(V(I),{key:1}))]),_:1})]),_:1},8,["modelValue","type","class","disabled"]),t.confirmPassword?(n(),i("div",Oe,b(t.confirmPassword),1)):_("",!0)])]),s("div",Ze,[s("button",{class:"setting__password_button button__primary",onClick:R,disabled:r.value},[r.value?(n(),i("span",We,"Сохранение...")):(n(),i("span",Ke,"сохранить изменения"))],8,Ge)])]),s("div",qe,[e[52]||(e[52]=s("h5",{class:"setting__details_heading"},"Банковские данные",-1)),s("div",Je,[s("div",Qe,[s("label",Xe,[U(s("input",{type:"radio","onUpdate:modelValue":e[23]||(e[23]=o=>l.bankDetails.userType=o),value:"executor",class:"form__label_input",disabled:r.value},null,8,Ye),[[z,l.bankDetails.userType]]),e[45]||(e[45]=s("span",{class:"form__label_text"},"Физическое лицо",-1))]),s("label",es,[U(s("input",{type:"radio","onUpdate:modelValue":e[24]||(e[24]=o=>l.bankDetails.userType=o),value:"label",class:"form__label_input",disabled:r.value},null,8,ss),[[z,l.bankDetails.userType]]),e[46]||(e[46]=s("span",{class:"form__label_text"},"Индивидуальный предприниматель",-1))])]),s("div",ts,[s("div",ls,[e[47]||(e[47]=s("label",{for:"fullName",class:"form__label button"},"ФИО",-1)),m(u,{id:"fullName",modelValue:l.bankDetails.fullName,"onUpdate:modelValue":e[25]||(e[25]=o=>l.bankDetails.fullName=o),class:c({error:t.bankDetails.fullName}),placeholder:"ФИО",disabled:r.value,onBlur:k,size:"large"},null,8,["modelValue","class","disabled"]),t.bankDetails.fullName?(n(),i("div",as,b(t.bankDetails.fullName),1)):_("",!0)]),s("div",os,[e[48]||(e[48]=s("label",{for:"accountNumber",class:"form__label button"},"Расчетный счет",-1)),m(u,{id:"accountNumber",modelValue:l.bankDetails.accountNumber,"onUpdate:modelValue":e[26]||(e[26]=o=>l.bankDetails.accountNumber=o),class:c({error:t.bankDetails.accountNumber}),placeholder:"Расчетный счет",disabled:r.value,onBlur:k,size:"large"},null,8,["modelValue","class","disabled"]),t.bankDetails.accountNumber?(n(),i("div",rs,b(t.bankDetails.accountNumber),1)):_("",!0)]),s("div",ns,[e[49]||(e[49]=s("label",{for:"bik",class:"form__label button"},"БИК банка",-1)),m(u,{id:"bik",modelValue:l.bankDetails.bik,"onUpdate:modelValue":e[27]||(e[27]=o=>l.bankDetails.bik=o),class:c({error:t.bankDetails.bik}),placeholder:"БИК банка",disabled:r.value,onBlur:k,size:"large"},null,8,["modelValue","class","disabled"]),t.bankDetails.bik?(n(),i("div",is,b(t.bankDetails.bik),1)):_("",!0)]),l.bankDetails.userType==="label"?(n(),i("div",ds,[e[50]||(e[50]=s("label",{for:"inn",class:"form__label button"},"ИНН",-1)),m(u,{id:"inn",modelValue:l.bankDetails.inn,"onUpdate:modelValue":e[28]||(e[28]=o=>l.bankDetails.inn=o),class:c({error:t.bankDetails.inn}),placeholder:"ИНН",disabled:r.value,onBlur:k,size:"large"},null,8,["modelValue","class","disabled"]),t.bankDetails.inn?(n(),i("div",us,b(t.bankDetails.inn),1)):_("",!0)])):_("",!0),l.bankDetails.userType==="label"?(n(),i("div",ms,[e[51]||(e[51]=s("label",{for:"kpp",class:"form__label button"},"КПП",-1)),m(u,{id:"kpp",modelValue:l.bankDetails.kpp,"onUpdate:modelValue":e[29]||(e[29]=o=>l.bankDetails.kpp=o),class:c({error:t.bankDetails.kpp}),placeholder:"КПП",disabled:r.value,onBlur:k,size:"large"},null,8,["modelValue","class","disabled"]),t.bankDetails.kpp?(n(),i("div",_s,b(t.bankDetails.kpp),1)):_("",!0)])):_("",!0)])]),s("div",ps,[s("button",{class:"setting__details_button button__primary",onClick:S,disabled:r.value},[r.value?(n(),i("span",fs,"Сохранение...")):(n(),i("span",bs,"сохранить изменения"))],8,cs)])]),s("div",vs,[e[54]||(e[54]=s("h5",{class:"setting__delete_heading"},"удаление аккаунта",-1)),e[55]||(e[55]=s("p",{class:"setting__delete_desc"},"Если захочешь восстановить аккаунт, можешь написать нам в группу VK или Телеграмм.",-1)),s("div",ks,[s("button",{class:"setting__delete_button button__primary",onClick:Z,disabled:r.value,style:{"background-color":"#f56c6c","border-color":"#f56c6c"}},e[53]||(e[53]=[s("span",null,"удалить",-1)]),8,gs)])])]),e[56]||(e[56]=s("div",{class:"setting__right"},null,-1))])])])])],64)}}}),Ls=Q(ys,[["__scopeId","data-v-0c9f3f46"]]);export{Ls as default};
