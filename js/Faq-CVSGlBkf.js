import{s as I}from"./api-dDMw0Exz.js";import{H as b,M as A}from"./Menu-BBq7Y8vQ.js";import{_ as y}from"./index-DLLIllaA.js";import{o as l,c as i,a as t,d as H,b as c,j as O,U as f,S as L,T as m,F as q,a8 as M,I as h}from"./@vue-DwLU1mub.js";import"./axios-BimPEqV4.js";import"./vue-router-CPimp6oI.js";import"./Logo-BjNREyvW.js";import"./ArticlesSVG-Ro8Ohdf6.js";import"./vue-i18n-DcgfqTZL.js";import"./@intlify-CQT3u4ju.js";import"./@element-plus-m0wAbjkV.js";import"./vue-tel-input-BsVA42h1.js";import"./element-plus-3NUcAjFf.js";import"./lodash-es-CiJSjksT.js";import"./@vueuse-Q_cOxmjC.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-Ct2Knyoi.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DF51-gJp.js";const F={},$={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"};function N(g,o){return l(),i("svg",$,o[0]||(o[0]=[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.43056 15.4881C4.70012 15.8026 5.1736 15.839 5.48809 15.5694L12 9.98779L18.5119 15.5694C18.8264 15.839 19.2999 15.8026 19.5694 15.4881C19.839 15.1736 19.8026 14.7001 19.4881 14.4305L12.4881 8.43054C12.2072 8.1898 11.7928 8.1898 11.5119 8.43054L4.5119 14.4305C4.19741 14.7001 4.16099 15.1736 4.43056 15.4881Z",fill:"currentColor"},null,-1)]))}const B=y(F,[["render",N]]),D={class:"personal"},R={class:"container personal__container"},S={class:"personal__block"},T={class:"faq__content"},V={key:0,class:"faq__loading"},E={key:1,class:"faq__error"},j={key:2,class:"faq__list"},P=["onClick","aria-expanded","aria-controls"],z={class:"faq__heading"},G=["id","aria-labelledby"],Q=["innerHTML"],U={key:3,class:"faq__empty"},W=H({__name:"Faq",setup(g){const o=c([]),d=c(null),r=c([]),u=c(!0),p=c(null),x=e=>{if(d.value===e)d.value=null,o.value=o.value.map(a=>({...a,isOpen:a.id===e?!1:a.isOpen}));else{const a=d.value;if(d.value=e,o.value=o.value.map(n=>({...n,isOpen:n.id===e})),a!==null){const n=o.value.findIndex(_=>_.id===a);n!==-1&&r.value[n]&&k(r.value[n])}const s=o.value.findIndex(n=>n.id===e);s!==-1&&r.value[s]&&w(r.value[s])}},w=e=>{e.style.maxHeight=e.scrollHeight+"px",e.style.opacity="1"},k=e=>{e.style.maxHeight="0px",e.style.opacity="0"},C=(e,a)=>{r.value[a]=e,e&&o.value[a]&&(o.value[a].isOpen?(e.style.maxHeight=e.scrollHeight+"px",e.style.opacity="1"):(e.style.maxHeight="0px",e.style.opacity="0"))},v=async()=>{u.value=!0,p.value=null;try{const e=await I("get","/ajax/getData.php",{});if(console.log("Данные из API:",e.data),e.data&&e.data.education&&e.data.education.faq){const a=e.data.education.faq;o.value=a.map((s,n)=>({id:s.ID||n+1,question:s.NAME||"Вопрос",answer:s.ANSWER||"Ответ отсутствует",isOpen:!1}))}else o.value=[],console.warn("FAQ данные не найдены в ответе API")}catch(e){console.error("Ошибка при загрузке данных:",e),p.value="Не удалось загрузить данные. Пожалуйста, попробуйте позже.",o.value=[{id:1,question:"Сервис временно недоступен",answer:"Пожалуйста, обновите страницу или попробуйте позже.",isOpen:!1}]}finally{u.value=!1}};return O(()=>{v()}),(e,a)=>(l(),i(q,null,[f(b),t("section",D,[t("div",R,[f(A),t("div",S,[t("div",T,[a[2]||(a[2]=t("div",{class:"faq__top"},[t("h3",{class:"faq__head"},"ответы на ваши вопросы"),t("p",{class:"faq__desc"},[L(" Не нашли ответ на вопрос? "),t("a",{href:"#",class:"faq__support-link"},"Написать в поддержку")])],-1)),u.value?(l(),i("div",V,a[0]||(a[0]=[t("p",null,"Загрузка вопросов...",-1)]))):p.value?(l(),i("div",E,[t("p",null,m(p.value),1),t("button",{onClick:v,class:"faq__retry-btn"},"Повторить попытку")])):o.value.length>0?(l(),i("ul",j,[(l(!0),i(q,null,M(o.value,(s,n)=>(l(),i("li",{key:s.id,class:h(["faq__item",{active:s.isOpen}])},[t("button",{class:"faq__button",onClick:_=>x(s.id),"aria-expanded":s.isOpen,"aria-controls":`faq-content-${s.id}`},[t("h5",z,m(s.question),1),t("div",{class:h(["faq__arrow",{active:s.isOpen}])},[f(B)],2)],8,P),t("div",{id:`faq-content-${s.id}`,class:"faq__info",ref_for:!0,ref:_=>C(_,n),role:"region","aria-labelledby":`faq-heading-${s.id}`},[t("div",{class:"faq__description",innerHTML:s.answer},null,8,Q)],8,G)],2))),128))])):(l(),i("div",U,a[1]||(a[1]=[t("p",null,"Вопросы временно отсутствуют",-1)])))])])])])],64))}}),qe=y(W,[["__scopeId","data-v-e1300487"]]);export{qe as default};
